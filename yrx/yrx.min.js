(function(globalScope){"use strict";var EXP_LIMIT=9e15,MAX_DIGITS=1e9,NUMERALS="0123456789abcdef",LN10="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",PI="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",DEFAULTS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-EXP_LIMIT,maxE:EXP_LIMIT,crypto:false},Decimal,inexact,noConflict,quadrant,external=true,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",precisionLimitExceeded=decimalError+"Precision limit exceeded",cryptoUnavailable=decimalError+"crypto unavailable",mathfloor=Math.floor,mathpow=Math.pow,isBinary=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,isHex=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,isOctal=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,LN10_PRECISION=LN10.length-1,PI_PRECISION=PI.length-1,P={name:"[object Decimal]"};P.absoluteValue=P.abs=function(){var x=new this.constructor(this);if(x.s<0)x.s=1;return finalise(x)};P.ceil=function(){return finalise(new this.constructor(this),this.e+1,2)};P.comparedTo=P.cmp=function(y){var i,j,xdL,ydL,x=this,xd=x.d,yd=(y=new x.constructor(y)).d,xs=x.s,ys=y.s;if(!xd||!yd){return!xs||!ys?NaN:xs!==ys?xs:xd===yd?0:!xd^xs<0?1:-1}if(!xd[0]||!yd[0])return xd[0]?xs:yd[0]?-ys:0;if(xs!==ys)return xs;if(x.e!==y.e)return x.e>y.e^xs<0?1:-1;xdL=xd.length;ydL=yd.length;for(i=0,j=xdL<ydL?xdL:ydL;i<j;++i){if(xd[i]!==yd[i])return xd[i]>yd[i]^xs<0?1:-1}return xdL===ydL?0:xdL>ydL^xs<0?1:-1};P.cosine=P.cos=function(){var pr,rm,x=this,Ctor=x.constructor;if(!x.d)return new Ctor(NaN);if(!x.d[0])return new Ctor(1);pr=Ctor.precision;rm=Ctor.rounding;Ctor.precision=pr+Math.max(x.e,x.sd())+LOG_BASE;Ctor.rounding=1;x=cosine(Ctor,toLessThanHalfPi(Ctor,x));Ctor.precision=pr;Ctor.rounding=rm;return finalise(quadrant==2||quadrant==3?x.neg():x,pr,rm,true)};P.cubeRoot=P.cbrt=function(){var e,m,n,r,rep,s,sd,t,t3,t3plusx,x=this,Ctor=x.constructor;if(!x.isFinite()||x.isZero())return new Ctor(x);external=false;s=x.s*Math.pow(x.s*x,1/3);if(!s||Math.abs(s)==1/0){n=digitsToString(x.d);e=x.e;if(s=(e-n.length+1)%3)n+=s==1||s==-2?"0":"00";s=Math.pow(n,1/3);e=mathfloor((e+1)/3)-(e%3==(e<0?-1:2));if(s==1/0){n="5e"+e}else{n=s.toExponential();n=n.slice(0,n.indexOf("e")+1)+e}r=new Ctor(n);r.s=x.s}else{r=new Ctor(s.toString())}sd=(e=Ctor.precision)+3;for(;;){t=r;t3=t.times(t).times(t);t3plusx=t3.plus(x);r=divide(t3plusx.plus(x).times(t),t3plusx.plus(t3),sd+2,1);if(digitsToString(t.d).slice(0,sd)===(n=digitsToString(r.d)).slice(0,sd)){n=n.slice(sd-3,sd+1);if(n=="9999"||!rep&&n=="4999"){if(!rep){finalise(t,e+1,0);if(t.times(t).times(t).eq(x)){r=t;break}}sd+=4;rep=1}else{if(!+n||!+n.slice(1)&&n.charAt(0)=="5"){finalise(r,e+1,1);m=!r.times(r).times(r).eq(x)}break}}}external=true;return finalise(r,e,Ctor.rounding,m)};P.decimalPlaces=P.dp=function(){var w,d=this.d,n=NaN;if(d){w=d.length-1;n=(w-mathfloor(this.e/LOG_BASE))*LOG_BASE;w=d[w];if(w)for(;w%10==0;w/=10)n--;if(n<0)n=0}return n};P.dividedBy=P.div=function(y){return divide(this,new this.constructor(y))};P.dividedToIntegerBy=P.divToInt=function(y){var x=this,Ctor=x.constructor;return finalise(divide(x,new Ctor(y),0,1,1),Ctor.precision,Ctor.rounding)};P.equals=P.eq=function(y){return this.cmp(y)===0};P.floor=function(){return finalise(new this.constructor(this),this.e+1,3)};P.greaterThan=P.gt=function(y){return this.cmp(y)>0};P.greaterThanOrEqualTo=P.gte=function(y){var k=this.cmp(y);return k==1||k===0};P.hyperbolicCosine=P.cosh=function(){var k,n,pr,rm,len,x=this,Ctor=x.constructor,one=new Ctor(1);if(!x.isFinite())return new Ctor(x.s?1/0:NaN);if(x.isZero())return one;pr=Ctor.precision;rm=Ctor.rounding;Ctor.precision=pr+Math.max(x.e,x.sd())+4;Ctor.rounding=1;len=x.d.length;if(len<32){k=Math.ceil(len/3);n=Math.pow(4,-k).toString()}else{k=16;n="2.3283064365386962890625e-10"}x=taylorSeries(Ctor,1,x.times(n),new Ctor(1),true);var cosh2_x,i=k,d8=new Ctor(8);for(;i--;){cosh2_x=x.times(x);x=one.minus(cosh2_x.times(d8.minus(cosh2_x.times(d8))))}return finalise(x,Ctor.precision=pr,Ctor.rounding=rm,true)};P.hyperbolicSine=P.sinh=function(){var k,pr,rm,len,x=this,Ctor=x.constructor;if(!x.isFinite()||x.isZero())return new Ctor(x);pr=Ctor.precision;rm=Ctor.rounding;Ctor.precision=pr+Math.max(x.e,x.sd())+4;Ctor.rounding=1;len=x.d.length;if(len<3){x=taylorSeries(Ctor,2,x,x,true)}else{k=1.4*Math.sqrt(len);k=k>16?16:k|0;x=x.times(Math.pow(5,-k));x=taylorSeries(Ctor,2,x,x,true);var sinh2_x,d5=new Ctor(5),d16=new Ctor(16),d20=new Ctor(20);for(;k--;){sinh2_x=x.times(x);x=x.times(d5.plus(sinh2_x.times(d16.times(sinh2_x).plus(d20))))}}Ctor.precision=pr;Ctor.rounding=rm;return finalise(x,pr,rm,true)};P.hyperbolicTangent=P.tanh=function(){var pr,rm,x=this,Ctor=x.constructor;if(!x.isFinite())return new Ctor(x.s);if(x.isZero())return new Ctor(x);pr=Ctor.precision;rm=Ctor.rounding;Ctor.precision=pr+7;Ctor.rounding=1;return divide(x.sinh(),x.cosh(),Ctor.precision=pr,Ctor.rounding=rm)};P.inverseCosine=P.acos=function(){var halfPi,x=this,Ctor=x.constructor,k=x.abs().cmp(1),pr=Ctor.precision,rm=Ctor.rounding;if(k!==-1){return k===0?x.isNeg()?getPi(Ctor,pr,rm):new Ctor(0):new Ctor(NaN)}if(x.isZero())return getPi(Ctor,pr+4,rm).times(.5);Ctor.precision=pr+6;Ctor.rounding=1;x=x.asin();halfPi=getPi(Ctor,pr+4,rm).times(.5);Ctor.precision=pr;Ctor.rounding=rm;return halfPi.minus(x)};P.inverseHyperbolicCosine=P.acosh=function(){var pr,rm,x=this,Ctor=x.constructor;if(x.lte(1))return new Ctor(x.eq(1)?0:NaN);if(!x.isFinite())return new Ctor(x);pr=Ctor.precision;rm=Ctor.rounding;Ctor.precision=pr+Math.max(Math.abs(x.e),x.sd())+4;Ctor.rounding=1;external=false;x=x.times(x).minus(1).sqrt().plus(x);external=true;Ctor.precision=pr;Ctor.rounding=rm;return x.ln()};P.inverseHyperbolicSine=P.asinh=function(){var pr,rm,x=this,Ctor=x.constructor;if(!x.isFinite()||x.isZero())return new Ctor(x);pr=Ctor.precision;rm=Ctor.rounding;Ctor.precision=pr+2*Math.max(Math.abs(x.e),x.sd())+6;Ctor.rounding=1;external=false;x=x.times(x).plus(1).sqrt().plus(x);external=true;Ctor.precision=pr;Ctor.rounding=rm;return x.ln()};P.inverseHyperbolicTangent=P.atanh=function(){var pr,rm,wpr,xsd,x=this,Ctor=x.constructor;if(!x.isFinite())return new Ctor(NaN);if(x.e>=0)return new Ctor(x.abs().eq(1)?x.s/0:x.isZero()?x:NaN);pr=Ctor.precision;rm=Ctor.rounding;xsd=x.sd();if(Math.max(xsd,pr)<2*-x.e-1)return finalise(new Ctor(x),pr,rm,true);Ctor.precision=wpr=xsd-x.e;x=divide(x.plus(1),new Ctor(1).minus(x),wpr+pr,1);Ctor.precision=pr+4;Ctor.rounding=1;x=x.ln();Ctor.precision=pr;Ctor.rounding=rm;return x.times(.5)};P.inverseSine=P.asin=function(){var halfPi,k,pr,rm,x=this,Ctor=x.constructor;if(x.isZero())return new Ctor(x);k=x.abs().cmp(1);pr=Ctor.precision;rm=Ctor.rounding;if(k!==-1){if(k===0){halfPi=getPi(Ctor,pr+4,rm).times(.5);halfPi.s=x.s;return halfPi}return new Ctor(NaN)}Ctor.precision=pr+6;Ctor.rounding=1;x=x.div(new Ctor(1).minus(x.times(x)).sqrt().plus(1)).atan();Ctor.precision=pr;Ctor.rounding=rm;return x.times(2)};P.inverseTangent=P.atan=function(){var i,j,k,n,px,t,r,wpr,x2,x=this,Ctor=x.constructor,pr=Ctor.precision,rm=Ctor.rounding;if(!x.isFinite()){if(!x.s)return new Ctor(NaN);if(pr+4<=PI_PRECISION){r=getPi(Ctor,pr+4,rm).times(.5);r.s=x.s;return r}}else if(x.isZero()){return new Ctor(x)}else if(x.abs().eq(1)&&pr+4<=PI_PRECISION){r=getPi(Ctor,pr+4,rm).times(.25);r.s=x.s;return r}Ctor.precision=wpr=pr+10;Ctor.rounding=1;k=Math.min(28,wpr/LOG_BASE+2|0);for(i=k;i;--i)x=x.div(x.times(x).plus(1).sqrt().plus(1));external=false;j=Math.ceil(wpr/LOG_BASE);n=1;x2=x.times(x);r=new Ctor(x);px=x;for(;i!==-1;){px=px.times(x2);t=r.minus(px.div(n+=2));px=px.times(x2);r=t.plus(px.div(n+=2));if(r.d[j]!==void 0)for(i=j;r.d[i]===t.d[i]&&i--;);}if(k)r=r.times(2<<k-1);external=true;return finalise(r,Ctor.precision=pr,Ctor.rounding=rm,true)};P.isFinite=function(){return!!this.d};P.isInteger=P.isInt=function(){return!!this.d&&mathfloor(this.e/LOG_BASE)>this.d.length-2};P.isNaN=function(){return!this.s};P.isNegative=P.isNeg=function(){return this.s<0};P.isPositive=P.isPos=function(){return this.s>0};P.isZero=function(){return!!this.d&&this.d[0]===0};P.lessThan=P.lt=function(y){return this.cmp(y)<0};P.lessThanOrEqualTo=P.lte=function(y){return this.cmp(y)<1};P.logarithm=P.log=function(base){var isBase10,d,denominator,k,inf,num,sd,r,arg=this,Ctor=arg.constructor,pr=Ctor.precision,rm=Ctor.rounding,guard=5;if(base==null){base=new Ctor(10);isBase10=true}else{base=new Ctor(base);d=base.d;if(base.s<0||!d||!d[0]||base.eq(1))return new Ctor(NaN);isBase10=base.eq(10)}d=arg.d;if(arg.s<0||!d||!d[0]||arg.eq(1)){return new Ctor(d&&!d[0]?-1/0:arg.s!=1?NaN:d?0:1/0)}if(isBase10){if(d.length>1){inf=true}else{for(k=d[0];k%10===0;)k/=10;inf=k!==1}}external=false;sd=pr+guard;num=naturalLogarithm(arg,sd);denominator=isBase10?getLn10(Ctor,sd+10):naturalLogarithm(base,sd);r=divide(num,denominator,sd,1);if(checkRoundingDigits(r.d,k=pr,rm)){do{sd+=10;num=naturalLogarithm(arg,sd);denominator=isBase10?getLn10(Ctor,sd+10):naturalLogarithm(base,sd);r=divide(num,denominator,sd,1);if(!inf){if(+digitsToString(r.d).slice(k+1,k+15)+1==1e14){r=finalise(r,pr+1,0)}break}}while(checkRoundingDigits(r.d,k+=10,rm))}external=true;return finalise(r,pr,rm)};P.minus=P.sub=function(y){var d,e,i,j,k,len,pr,rm,xd,xe,xLTy,yd,x=this,Ctor=x.constructor;y=new Ctor(y);if(!x.d||!y.d){if(!x.s||!y.s)y=new Ctor(NaN);else if(x.d)y.s=-y.s;else y=new Ctor(y.d||x.s!==y.s?x:NaN);return y}if(x.s!=y.s){y.s=-y.s;return x.plus(y)}xd=x.d;yd=y.d;pr=Ctor.precision;rm=Ctor.rounding;if(!xd[0]||!yd[0]){if(yd[0])y.s=-y.s;else if(xd[0])y=new Ctor(x);else return new Ctor(rm===3?-0:0);return external?finalise(y,pr,rm):y}e=mathfloor(y.e/LOG_BASE);xe=mathfloor(x.e/LOG_BASE);xd=xd.slice();k=xe-e;if(k){xLTy=k<0;if(xLTy){d=xd;k=-k;len=yd.length}else{d=yd;e=xe;len=xd.length}i=Math.max(Math.ceil(pr/LOG_BASE),len)+2;if(k>i){k=i;d.length=1}d.reverse();for(i=k;i--;)d.push(0);d.reverse()}else{i=xd.length;len=yd.length;xLTy=i<len;if(xLTy)len=i;for(i=0;i<len;i++){if(xd[i]!=yd[i]){xLTy=xd[i]<yd[i];break}}k=0}if(xLTy){d=xd;xd=yd;yd=d;y.s=-y.s}len=xd.length;for(i=yd.length-len;i>0;--i)xd[len++]=0;for(i=yd.length;i>k;){if(xd[--i]<yd[i]){for(j=i;j&&xd[--j]===0;)xd[j]=BASE-1;--xd[j];xd[i]+=BASE}xd[i]-=yd[i]}for(;xd[--len]===0;)xd.pop();for(;xd[0]===0;xd.shift())--e;if(!xd[0])return new Ctor(rm===3?-0:0);y.d=xd;y.e=getBase10Exponent(xd,e);return external?finalise(y,pr,rm):y};P.modulo=P.mod=function(y){var q,x=this,Ctor=x.constructor;y=new Ctor(y);if(!x.d||!y.s||y.d&&!y.d[0])return new Ctor(NaN);if(!y.d||x.d&&!x.d[0]){return finalise(new Ctor(x),Ctor.precision,Ctor.rounding)}external=false;if(Ctor.modulo==9){q=divide(x,y.abs(),0,3,1);q.s*=y.s}else{q=divide(x,y,0,Ctor.modulo,1)}q=q.times(y);external=true;return x.minus(q)};P.naturalExponential=P.exp=function(){return naturalExponential(this)};P.naturalLogarithm=P.ln=function(){return naturalLogarithm(this)};P.negated=P.neg=function(){var x=new this.constructor(this);x.s=-x.s;return finalise(x)};P.plus=P.add=function(y){var carry,d,e,i,k,len,pr,rm,xd,yd,x=this,Ctor=x.constructor;y=new Ctor(y);if(!x.d||!y.d){if(!x.s||!y.s)y=new Ctor(NaN);else if(!x.d)y=new Ctor(y.d||x.s===y.s?x:NaN);return y}if(x.s!=y.s){y.s=-y.s;return x.minus(y)}xd=x.d;yd=y.d;pr=Ctor.precision;rm=Ctor.rounding;if(!xd[0]||!yd[0]){if(!yd[0])y=new Ctor(x);return external?finalise(y,pr,rm):y}k=mathfloor(x.e/LOG_BASE);e=mathfloor(y.e/LOG_BASE);xd=xd.slice();i=k-e;if(i){if(i<0){d=xd;i=-i;len=yd.length}else{d=yd;e=k;len=xd.length}k=Math.ceil(pr/LOG_BASE);len=k>len?k+1:len+1;if(i>len){i=len;d.length=1}d.reverse();for(;i--;)d.push(0);d.reverse()}len=xd.length;i=yd.length;if(len-i<0){i=len;d=yd;yd=xd;xd=d}for(carry=0;i;){carry=(xd[--i]=xd[i]+yd[i]+carry)/BASE|0;xd[i]%=BASE}if(carry){xd.unshift(carry);++e}for(len=xd.length;xd[--len]==0;)xd.pop();y.d=xd;y.e=getBase10Exponent(xd,e);return external?finalise(y,pr,rm):y};P.precision=P.sd=function(z){var k,x=this;if(z!==void 0&&z!==!!z&&z!==1&&z!==0)throw Error(invalidArgument+z);if(x.d){k=getPrecision(x.d);if(z&&x.e+1>k)k=x.e+1}else{k=NaN}return k};P.round=function(){var x=this,Ctor=x.constructor;return finalise(new Ctor(x),x.e+1,Ctor.rounding)};P.sine=P.sin=function(){var pr,rm,x=this,Ctor=x.constructor;if(!x.isFinite())return new Ctor(NaN);if(x.isZero())return new Ctor(x);pr=Ctor.precision;rm=Ctor.rounding;Ctor.precision=pr+Math.max(x.e,x.sd())+LOG_BASE;Ctor.rounding=1;x=sine(Ctor,toLessThanHalfPi(Ctor,x));Ctor.precision=pr;Ctor.rounding=rm;return finalise(quadrant>2?x.neg():x,pr,rm,true)};P.squareRoot=P.sqrt=function(){var m,n,sd,r,rep,t,x=this,d=x.d,e=x.e,s=x.s,Ctor=x.constructor;if(s!==1||!d||!d[0]){return new Ctor(!s||s<0&&(!d||d[0])?NaN:d?x:1/0)}external=false;s=Math.sqrt(+x);if(s==0||s==1/0){n=digitsToString(d);if((n.length+e)%2==0)n+="0";s=Math.sqrt(n);e=mathfloor((e+1)/2)-(e<0||e%2);if(s==1/0){n="1e"+e}else{n=s.toExponential();n=n.slice(0,n.indexOf("e")+1)+e}r=new Ctor(n)}else{r=new Ctor(s.toString())}sd=(e=Ctor.precision)+3;for(;;){t=r;r=t.plus(divide(x,t,sd+2,1)).times(.5);if(digitsToString(t.d).slice(0,sd)===(n=digitsToString(r.d)).slice(0,sd)){n=n.slice(sd-3,sd+1);if(n=="9999"||!rep&&n=="4999"){if(!rep){finalise(t,e+1,0);if(t.times(t).eq(x)){r=t;break}}sd+=4;rep=1}else{if(!+n||!+n.slice(1)&&n.charAt(0)=="5"){finalise(r,e+1,1);m=!r.times(r).eq(x)}break}}}external=true;return finalise(r,e,Ctor.rounding,m)};P.tangent=P.tan=function(){var pr,rm,x=this,Ctor=x.constructor;if(!x.isFinite())return new Ctor(NaN);if(x.isZero())return new Ctor(x);pr=Ctor.precision;rm=Ctor.rounding;Ctor.precision=pr+10;Ctor.rounding=1;x=x.sin();x.s=1;x=divide(x,new Ctor(1).minus(x.times(x)).sqrt(),pr+10,0);Ctor.precision=pr;Ctor.rounding=rm;return finalise(quadrant==2||quadrant==4?x.neg():x,pr,rm,true)};P.times=P.mul=function(y){var carry,e,i,k,r,rL,t,xdL,ydL,x=this,Ctor=x.constructor,xd=x.d,yd=(y=new Ctor(y)).d;y.s*=x.s;if(!xd||!xd[0]||!yd||!yd[0]){return new Ctor(!y.s||xd&&!xd[0]&&!yd||yd&&!yd[0]&&!xd?NaN:!xd||!yd?y.s/0:y.s*0)}e=mathfloor(x.e/LOG_BASE)+mathfloor(y.e/LOG_BASE);xdL=xd.length;ydL=yd.length;if(xdL<ydL){r=xd;xd=yd;yd=r;rL=xdL;xdL=ydL;ydL=rL}r=[];rL=xdL+ydL;for(i=rL;i--;)r.push(0);for(i=ydL;--i>=0;){carry=0;for(k=xdL+i;k>i;){t=r[k]+yd[i]*xd[k-i-1]+carry;r[k--]=t%BASE|0;carry=t/BASE|0}r[k]=(r[k]+carry)%BASE|0}for(;!r[--rL];)r.pop();if(carry)++e;else r.shift();y.d=r;y.e=getBase10Exponent(r,e);return external?finalise(y,Ctor.precision,Ctor.rounding):y};P.toBinary=function(sd,rm){return toStringBinary(this,2,sd,rm)};P.toDecimalPlaces=P.toDP=function(dp,rm){var x=this,Ctor=x.constructor;x=new Ctor(x);if(dp===void 0)return x;checkInt32(dp,0,MAX_DIGITS);if(rm===void 0)rm=Ctor.rounding;else checkInt32(rm,0,8);return finalise(x,dp+x.e+1,rm)};P.toExponential=function(dp,rm){var str,x=this,Ctor=x.constructor;if(dp===void 0){str=finiteToString(x,true)}else{checkInt32(dp,0,MAX_DIGITS);if(rm===void 0)rm=Ctor.rounding;else checkInt32(rm,0,8);x=finalise(new Ctor(x),dp+1,rm);str=finiteToString(x,true,dp+1)}return x.isNeg()&&!x.isZero()?"-"+str:str};P.toFixed=function(dp,rm){var str,y,x=this,Ctor=x.constructor;if(dp===void 0){str=finiteToString(x)}else{checkInt32(dp,0,MAX_DIGITS);if(rm===void 0)rm=Ctor.rounding;else checkInt32(rm,0,8);y=finalise(new Ctor(x),dp+x.e+1,rm);str=finiteToString(y,false,dp+y.e+1)}return x.isNeg()&&!x.isZero()?"-"+str:str};P.toFraction=function(maxD){var d,d0,d1,d2,e,k,n,n0,n1,pr,q,r,x=this,xd=x.d,Ctor=x.constructor;if(!xd)return new Ctor(x);n1=d0=new Ctor(1);d1=n0=new Ctor(0);d=new Ctor(d1);e=d.e=getPrecision(xd)-x.e-1;k=e%LOG_BASE;d.d[0]=mathpow(10,k<0?LOG_BASE+k:k);if(maxD==null){maxD=e>0?d:n1}else{n=new Ctor(maxD);if(!n.isInt()||n.lt(n1))throw Error(invalidArgument+n);maxD=n.gt(d)?e>0?d:n1:n}external=false;n=new Ctor(digitsToString(xd));pr=Ctor.precision;Ctor.precision=e=xd.length*LOG_BASE*2;for(;;){q=divide(n,d,0,1,1);d2=d0.plus(q.times(d1));if(d2.cmp(maxD)==1)break;d0=d1;d1=d2;d2=n1;n1=n0.plus(q.times(d2));n0=d2;d2=d;d=n.minus(q.times(d2));n=d2}d2=divide(maxD.minus(d0),d1,0,1,1);n0=n0.plus(d2.times(n1));d0=d0.plus(d2.times(d1));n0.s=n1.s=x.s;r=divide(n1,d1,e,1).minus(x).abs().cmp(divide(n0,d0,e,1).minus(x).abs())<1?[n1,d1]:[n0,d0];Ctor.precision=pr;external=true;return r};P.toHexadecimal=P.toHex=function(sd,rm){return toStringBinary(this,16,sd,rm)};P.toNearest=function(y,rm){var x=this,Ctor=x.constructor;x=new Ctor(x);if(y==null){if(!x.d)return x;y=new Ctor(1);rm=Ctor.rounding}else{y=new Ctor(y);if(rm===void 0){rm=Ctor.rounding}else{checkInt32(rm,0,8)}if(!x.d)return y.s?x:y;if(!y.d){if(y.s)y.s=x.s;return y}}if(y.d[0]){external=false;x=divide(x,y,0,rm,1).times(y);external=true;finalise(x)}else{y.s=x.s;x=y}return x};P.toNumber=function(){return+this};P.toOctal=function(sd,rm){return toStringBinary(this,8,sd,rm)};P.toPower=P.pow=function(y){var e,k,pr,r,rm,s,x=this,Ctor=x.constructor,yn=+(y=new Ctor(y));if(!x.d||!y.d||!x.d[0]||!y.d[0])return new Ctor(mathpow(+x,yn));x=new Ctor(x);if(x.eq(1))return x;pr=Ctor.precision;rm=Ctor.rounding;if(y.eq(1))return finalise(x,pr,rm);e=mathfloor(y.e/LOG_BASE);if(e>=y.d.length-1&&(k=yn<0?-yn:yn)<=MAX_SAFE_INTEGER){r=intPow(Ctor,x,k,pr);return y.s<0?new Ctor(1).div(r):finalise(r,pr,rm)}s=x.s;if(s<0){if(e<y.d.length-1)return new Ctor(NaN);if((y.d[e]&1)==0)s=1;if(x.e==0&&x.d[0]==1&&x.d.length==1){x.s=s;return x}}k=mathpow(+x,yn);e=k==0||!isFinite(k)?mathfloor(yn*(Math.log("0."+digitsToString(x.d))/Math.LN10+x.e+1)):new Ctor(k+"").e;if(e>Ctor.maxE+1||e<Ctor.minE-1)return new Ctor(e>0?s/0:0);external=false;Ctor.rounding=x.s=1;k=Math.min(12,(e+"").length);r=naturalExponential(y.times(naturalLogarithm(x,pr+k)),pr);if(r.d){r=finalise(r,pr+5,1);if(checkRoundingDigits(r.d,pr,rm)){e=pr+10;r=finalise(naturalExponential(y.times(naturalLogarithm(x,e+k)),e),e+5,1);if(+digitsToString(r.d).slice(pr+1,pr+15)+1==1e14){r=finalise(r,pr+1,0)}}}r.s=s;external=true;Ctor.rounding=rm;return finalise(r,pr,rm)};P.toPrecision=function(sd,rm){var str,x=this,Ctor=x.constructor;if(sd===void 0){str=finiteToString(x,x.e<=Ctor.toExpNeg||x.e>=Ctor.toExpPos)}else{checkInt32(sd,1,MAX_DIGITS);if(rm===void 0)rm=Ctor.rounding;else checkInt32(rm,0,8);x=finalise(new Ctor(x),sd,rm);str=finiteToString(x,sd<=x.e||x.e<=Ctor.toExpNeg,sd)}return x.isNeg()&&!x.isZero()?"-"+str:str};P.toSignificantDigits=P.toSD=function(sd,rm){var x=this,Ctor=x.constructor;if(sd===void 0){sd=Ctor.precision;rm=Ctor.rounding}else{checkInt32(sd,1,MAX_DIGITS);if(rm===void 0)rm=Ctor.rounding;else checkInt32(rm,0,8)}return finalise(new Ctor(x),sd,rm)};P.toString=function(){var x=this,Ctor=x.constructor,str=finiteToString(x,x.e<=Ctor.toExpNeg||x.e>=Ctor.toExpPos);return x.isNeg()&&!x.isZero()?"-"+str:str};P.truncated=P.trunc=function(){return finalise(new this.constructor(this),this.e+1,1)};P.valueOf=P.toJSON=function(){var x=this,Ctor=x.constructor,str=finiteToString(x,x.e<=Ctor.toExpNeg||x.e>=Ctor.toExpPos);return x.isNeg()?"-"+str:str};function digitsToString(d){var i,k,ws,indexOfLastWord=d.length-1,str="",w=d[0];if(indexOfLastWord>0){str+=w;for(i=1;i<indexOfLastWord;i++){ws=d[i]+"";k=LOG_BASE-ws.length;if(k)str+=getZeroString(k);str+=ws}w=d[i];ws=w+"";k=LOG_BASE-ws.length;if(k)str+=getZeroString(k)}else if(w===0){return"0"}for(;w%10===0;)w/=10;return str+w}function checkInt32(i,min,max){if(i!==~~i||i<min||i>max){throw Error(invalidArgument+i)}}function checkRoundingDigits(d,i,rm,repeating){var di,k,r,rd;for(k=d[0];k>=10;k/=10)--i;if(--i<0){i+=LOG_BASE;di=0}else{di=Math.ceil((i+1)/LOG_BASE);i%=LOG_BASE}k=mathpow(10,LOG_BASE-i);rd=d[di]%k|0;if(repeating==null){if(i<3){if(i==0)rd=rd/100|0;else if(i==1)rd=rd/10|0;r=rm<4&&rd==99999||rm>3&&rd==49999||rd==5e4||rd==0}else{r=(rm<4&&rd+1==k||rm>3&&rd+1==k/2)&&(d[di+1]/k/100|0)==mathpow(10,i-2)-1||(rd==k/2||rd==0)&&(d[di+1]/k/100|0)==0}}else{if(i<4){if(i==0)rd=rd/1e3|0;else if(i==1)rd=rd/100|0;else if(i==2)rd=rd/10|0;r=(repeating||rm<4)&&rd==9999||!repeating&&rm>3&&rd==4999}else{r=((repeating||rm<4)&&rd+1==k||!repeating&&rm>3&&rd+1==k/2)&&(d[di+1]/k/1e3|0)==mathpow(10,i-3)-1}}return r}function convertBase(str,baseIn,baseOut){var j,arr=[0],arrL,i=0,strL=str.length;for(;i<strL;){for(arrL=arr.length;arrL--;)arr[arrL]*=baseIn;arr[0]+=NUMERALS.indexOf(str.charAt(i++));for(j=0;j<arr.length;j++){if(arr[j]>baseOut-1){if(arr[j+1]===void 0)arr[j+1]=0;arr[j+1]+=arr[j]/baseOut|0;arr[j]%=baseOut}}}return arr.reverse()}function cosine(Ctor,x){var k,y,len=x.d.length;if(len<32){k=Math.ceil(len/3);y=Math.pow(4,-k).toString()}else{k=16;y="2.3283064365386962890625e-10"}Ctor.precision+=k;x=taylorSeries(Ctor,1,x.times(y),new Ctor(1));for(var i=k;i--;){var cos2x=x.times(x);x=cos2x.times(cos2x).minus(cos2x).times(8).plus(1)}Ctor.precision-=k;return x}var divide=function(){function multiplyInteger(x,k,base){var temp,carry=0,i=x.length;for(x=x.slice();i--;){temp=x[i]*k+carry;x[i]=temp%base|0;carry=temp/base|0}if(carry)x.unshift(carry);return x}function compare(a,b,aL,bL){var i,r;if(aL!=bL){r=aL>bL?1:-1}else{for(i=r=0;i<aL;i++){if(a[i]!=b[i]){r=a[i]>b[i]?1:-1;break}}}return r}function subtract(a,b,aL,base){var i=0;for(;aL--;){a[aL]-=i;i=a[aL]<b[aL]?1:0;a[aL]=i*base+a[aL]-b[aL]}for(;!a[0]&&a.length>1;)a.shift()}return function(x,y,pr,rm,dp,base){var cmp,e,i,k,logBase,more,prod,prodL,q,qd,rem,remL,rem0,sd,t,xi,xL,yd0,yL,yz,Ctor=x.constructor,sign=x.s==y.s?1:-1,xd=x.d,yd=y.d;if(!xd||!xd[0]||!yd||!yd[0]){return new Ctor(!x.s||!y.s||(xd?yd&&xd[0]==yd[0]:!yd)?NaN:xd&&xd[0]==0||!yd?sign*0:sign/0)}if(base){logBase=1;e=x.e-y.e}else{base=BASE;logBase=LOG_BASE;e=mathfloor(x.e/logBase)-mathfloor(y.e/logBase)}yL=yd.length;xL=xd.length;q=new Ctor(sign);qd=q.d=[];for(i=0;yd[i]==(xd[i]||0);i++);if(yd[i]>(xd[i]||0))e--;if(pr==null){sd=pr=Ctor.precision;rm=Ctor.rounding}else if(dp){sd=pr+(x.e-y.e)+1}else{sd=pr}if(sd<0){qd.push(1);more=true}else{sd=sd/logBase+2|0;i=0;if(yL==1){k=0;yd=yd[0];sd++;for(;(i<xL||k)&&sd--;i++){t=k*base+(xd[i]||0);qd[i]=t/yd|0;k=t%yd|0}more=k||i<xL}else{k=base/(yd[0]+1)|0;if(k>1){yd=multiplyInteger(yd,k,base);xd=multiplyInteger(xd,k,base);yL=yd.length;xL=xd.length}xi=yL;rem=xd.slice(0,yL);remL=rem.length;for(;remL<yL;)rem[remL++]=0;yz=yd.slice();yz.unshift(0);yd0=yd[0];if(yd[1]>=base/2)++yd0;do{k=0;cmp=compare(yd,rem,yL,remL);if(cmp<0){rem0=rem[0];if(yL!=remL)rem0=rem0*base+(rem[1]||0);k=rem0/yd0|0;if(k>1){if(k>=base)k=base-1;prod=multiplyInteger(yd,k,base);prodL=prod.length;remL=rem.length;cmp=compare(prod,rem,prodL,remL);if(cmp==1){k--;subtract(prod,yL<prodL?yz:yd,prodL,base)}}else{if(k==0)cmp=k=1;prod=yd.slice()}prodL=prod.length;if(prodL<remL)prod.unshift(0);subtract(rem,prod,remL,base);if(cmp==-1){remL=rem.length;cmp=compare(yd,rem,yL,remL);if(cmp<1){k++;subtract(rem,yL<remL?yz:yd,remL,base)}}remL=rem.length}else if(cmp===0){k++;rem=[0]}qd[i++]=k;if(cmp&&rem[0]){rem[remL++]=xd[xi]||0}else{rem=[xd[xi]];remL=1}}while((xi++<xL||rem[0]!==void 0)&&sd--);more=rem[0]!==void 0}if(!qd[0])qd.shift()}if(logBase==1){q.e=e;inexact=more}else{for(i=1,k=qd[0];k>=10;k/=10)i++;q.e=i+e*logBase-1;finalise(q,dp?pr+q.e+1:pr,rm,more)}return q}}();function finalise(x,sd,rm,isTruncated){var digits,i,j,k,rd,roundUp,w,xd,xdi,Ctor=x.constructor;out:if(sd!=null){xd=x.d;if(!xd)return x;for(digits=1,k=xd[0];k>=10;k/=10)digits++;i=sd-digits;if(i<0){i+=LOG_BASE;j=sd;w=xd[xdi=0];rd=w/mathpow(10,digits-j-1)%10|0}else{xdi=Math.ceil((i+1)/LOG_BASE);k=xd.length;if(xdi>=k){if(isTruncated){for(;k++<=xdi;)xd.push(0);w=rd=0;digits=1;i%=LOG_BASE;j=i-LOG_BASE+1}else{break out}}else{w=k=xd[xdi];for(digits=1;k>=10;k/=10)digits++;i%=LOG_BASE;j=i-LOG_BASE+digits;rd=j<0?0:w/mathpow(10,digits-j-1)%10|0}}isTruncated=isTruncated||sd<0||xd[xdi+1]!==void 0||(j<0?w:w%mathpow(10,digits-j-1));roundUp=rm<4?(rd||isTruncated)&&(rm==0||rm==(x.s<0?3:2)):rd>5||rd==5&&(rm==4||isTruncated||rm==6&&(i>0?j>0?w/mathpow(10,digits-j):0:xd[xdi-1])%10&1||rm==(x.s<0?8:7));if(sd<1||!xd[0]){xd.length=0;if(roundUp){sd-=x.e+1;xd[0]=mathpow(10,(LOG_BASE-sd%LOG_BASE)%LOG_BASE);x.e=-sd||0}else{xd[0]=x.e=0}return x}if(i==0){xd.length=xdi;k=1;xdi--}else{xd.length=xdi+1;k=mathpow(10,LOG_BASE-i);xd[xdi]=j>0?(w/mathpow(10,digits-j)%mathpow(10,j)|0)*k:0}if(roundUp){for(;;){if(xdi==0){for(i=1,j=xd[0];j>=10;j/=10)i++;j=xd[0]+=k;for(k=1;j>=10;j/=10)k++;if(i!=k){x.e++;if(xd[0]==BASE)xd[0]=1}break}else{xd[xdi]+=k;if(xd[xdi]!=BASE)break;xd[xdi--]=0;k=1}}}for(i=xd.length;xd[--i]===0;)xd.pop()}if(external){if(x.e>Ctor.maxE){x.d=null;x.e=NaN}else if(x.e<Ctor.minE){x.e=0;x.d=[0]}}return x}function finiteToString(x,isExp,sd){if(!x.isFinite())return nonFiniteToString(x);var k,e=x.e,str=digitsToString(x.d),len=str.length;if(isExp){if(sd&&(k=sd-len)>0){str=str.charAt(0)+"."+str.slice(1)+getZeroString(k)}else if(len>1){str=str.charAt(0)+"."+str.slice(1)}str=str+(x.e<0?"e":"e+")+x.e}else if(e<0){str="0."+getZeroString(-e-1)+str;if(sd&&(k=sd-len)>0)str+=getZeroString(k)}else if(e>=len){str+=getZeroString(e+1-len);if(sd&&(k=sd-e-1)>0)str=str+"."+getZeroString(k)}else{if((k=e+1)<len)str=str.slice(0,k)+"."+str.slice(k);if(sd&&(k=sd-len)>0){if(e+1===len)str+=".";str+=getZeroString(k)}}return str}function getBase10Exponent(digits,e){var w=digits[0];for(e*=LOG_BASE;w>=10;w/=10)e++;return e}function getLn10(Ctor,sd,pr){if(sd>LN10_PRECISION){external=true;if(pr)Ctor.precision=pr;throw Error(precisionLimitExceeded)}return finalise(new Ctor(LN10),sd,1,true)}function getPi(Ctor,sd,rm){if(sd>PI_PRECISION)throw Error(precisionLimitExceeded);return finalise(new Ctor(PI),sd,rm,true)}function getPrecision(digits){var w=digits.length-1,len=w*LOG_BASE+1;w=digits[w];if(w){for(;w%10==0;w/=10)len--;for(w=digits[0];w>=10;w/=10)len++}return len}function getZeroString(k){var zs="";for(;k--;)zs+="0";return zs}function intPow(Ctor,x,n,pr){var isTruncated,r=new Ctor(1),k=Math.ceil(pr/LOG_BASE+4);external=false;for(;;){if(n%2){r=r.times(x);if(truncate(r.d,k))isTruncated=true}n=mathfloor(n/2);if(n===0){n=r.d.length-1;if(isTruncated&&r.d[n]===0)++r.d[n];break}x=x.times(x);truncate(x.d,k)}external=true;return r}function isOdd(n){return n.d[n.d.length-1]&1}function maxOrMin(Ctor,args,ltgt){var y,x=new Ctor(args[0]),i=0;for(;++i<args.length;){y=new Ctor(args[i]);if(!y.s){x=y;break}else if(x[ltgt](y)){x=y}}return x}function naturalExponential(x,sd){var denominator,guard,j,pow,sum,t,wpr,rep=0,i=0,k=0,Ctor=x.constructor,rm=Ctor.rounding,pr=Ctor.precision;if(!x.d||!x.d[0]||x.e>17){return new Ctor(x.d?!x.d[0]?1:x.s<0?0:1/0:x.s?x.s<0?0:x:0/0)}if(sd==null){external=false;wpr=pr}else{wpr=sd}t=new Ctor(.03125);while(x.e>-2){x=x.times(t);k+=5}guard=Math.log(mathpow(2,k))/Math.LN10*2+5|0;wpr+=guard;denominator=pow=sum=new Ctor(1);Ctor.precision=wpr;for(;;){pow=finalise(pow.times(x),wpr,1);denominator=denominator.times(++i);t=sum.plus(divide(pow,denominator,wpr,1));if(digitsToString(t.d).slice(0,wpr)===digitsToString(sum.d).slice(0,wpr)){j=k;while(j--)sum=finalise(sum.times(sum),wpr,1);if(sd==null){if(rep<3&&checkRoundingDigits(sum.d,wpr-guard,rm,rep)){Ctor.precision=wpr+=10;denominator=pow=t=new Ctor(1);i=0;rep++}else{return finalise(sum,Ctor.precision=pr,rm,external=true)}}else{Ctor.precision=pr;return sum}}sum=t}}function naturalLogarithm(y,sd){var c,c0,denominator,e,numerator,rep,sum,t,wpr,x1,x2,n=1,guard=10,x=y,xd=x.d,Ctor=x.constructor,rm=Ctor.rounding,pr=Ctor.precision;if(x.s<0||!xd||!xd[0]||!x.e&&xd[0]==1&&xd.length==1){return new Ctor(xd&&!xd[0]?-1/0:x.s!=1?NaN:xd?0:x)}if(sd==null){external=false;wpr=pr}else{wpr=sd}Ctor.precision=wpr+=guard;c=digitsToString(xd);c0=c.charAt(0);if(Math.abs(e=x.e)<15e14){while(c0<7&&c0!=1||c0==1&&c.charAt(1)>3){x=x.times(y);c=digitsToString(x.d);c0=c.charAt(0);n++}e=x.e;if(c0>1){x=new Ctor("0."+c);e++}else{x=new Ctor(c0+"."+c.slice(1))}}else{t=getLn10(Ctor,wpr+2,pr).times(e+"");x=naturalLogarithm(new Ctor(c0+"."+c.slice(1)),wpr-guard).plus(t);Ctor.precision=pr;return sd==null?finalise(x,pr,rm,external=true):x}x1=x;sum=numerator=x=divide(x.minus(1),x.plus(1),wpr,1);x2=finalise(x.times(x),wpr,1);denominator=3;for(;;){numerator=finalise(numerator.times(x2),wpr,1);t=sum.plus(divide(numerator,new Ctor(denominator),wpr,1));if(digitsToString(t.d).slice(0,wpr)===digitsToString(sum.d).slice(0,wpr)){sum=sum.times(2);if(e!==0)sum=sum.plus(getLn10(Ctor,wpr+2,pr).times(e+""));sum=divide(sum,new Ctor(n),wpr,1);if(sd==null){if(checkRoundingDigits(sum.d,wpr-guard,rm,rep)){Ctor.precision=wpr+=guard;t=numerator=x=divide(x1.minus(1),x1.plus(1),wpr,1);x2=finalise(x.times(x),wpr,1);denominator=rep=1}else{return finalise(sum,Ctor.precision=pr,rm,external=true)}}else{Ctor.precision=pr;return sum}}sum=t;denominator+=2}}function nonFiniteToString(x){return String(x.s*x.s/0)}function parseDecimal(x,str){var e,i,len;if((e=str.indexOf("."))>-1)str=str.replace(".","");if((i=str.search(/e/i))>0){if(e<0)e=i;e+=+str.slice(i+1);str=str.substring(0,i)}else if(e<0){e=str.length}for(i=0;str.charCodeAt(i)===48;i++);for(len=str.length;str.charCodeAt(len-1)===48;--len);str=str.slice(i,len);if(str){len-=i;x.e=e=e-i-1;x.d=[];i=(e+1)%LOG_BASE;if(e<0)i+=LOG_BASE;if(i<len){if(i)x.d.push(+str.slice(0,i));for(len-=LOG_BASE;i<len;)x.d.push(+str.slice(i,i+=LOG_BASE));str=str.slice(i);i=LOG_BASE-str.length}else{i-=len}for(;i--;)str+="0";x.d.push(+str);if(external){if(x.e>x.constructor.maxE){x.d=null;x.e=NaN}else if(x.e<x.constructor.minE){x.e=0;x.d=[0]}}}else{x.e=0;x.d=[0]}return x}function parseOther(x,str){var base,Ctor,divisor,i,isFloat,len,p,xd,xe;if(str==="Infinity"||str==="NaN"){if(!+str)x.s=NaN;x.e=NaN;x.d=null;return x}if(isHex.test(str)){base=16;str=str.toLowerCase()}else if(isBinary.test(str)){base=2}else if(isOctal.test(str)){base=8}else{throw Error(invalidArgument+str)}i=str.search(/p/i);if(i>0){p=+str.slice(i+1);str=str.substring(2,i)}else{str=str.slice(2)}i=str.indexOf(".");isFloat=i>=0;Ctor=x.constructor;if(isFloat){str=str.replace(".","");len=str.length;i=len-i;divisor=intPow(Ctor,new Ctor(base),i,i*2)}xd=convertBase(str,base,BASE);xe=xd.length-1;for(i=xe;xd[i]===0;--i)xd.pop();if(i<0)return new Ctor(x.s*0);x.e=getBase10Exponent(xd,xe);x.d=xd;external=false;if(isFloat)x=divide(x,divisor,len*4);if(p)x=x.times(Math.abs(p)<54?Math.pow(2,p):Decimal.pow(2,p));external=true;return x}
function sine(Ctor,x){var k,len=x.d.length;if(len<3)return taylorSeries(Ctor,2,x,x);k=1.4*Math.sqrt(len);k=k>16?16:k|0;x=x.times(Math.pow(5,-k));x=taylorSeries(Ctor,2,x,x);var sin2_x,d5=new Ctor(5),d16=new Ctor(16),d20=new Ctor(20);for(;k--;){sin2_x=x.times(x);x=x.times(d5.plus(sin2_x.times(d16.times(sin2_x).minus(d20))))}return x}function taylorSeries(Ctor,n,x,y,isHyperbolic){var j,t,u,x2,i=1,pr=Ctor.precision,k=Math.ceil(pr/LOG_BASE);external=false;x2=x.times(x);u=new Ctor(y);for(;;){t=divide(u.times(x2),new Ctor(n++*n++),pr,1);u=isHyperbolic?y.plus(t):y.minus(t);y=divide(t.times(x2),new Ctor(n++*n++),pr,1);t=u.plus(y);if(t.d[k]!==void 0){for(j=k;t.d[j]===u.d[j]&&j--;);if(j==-1)break}j=u;u=y;y=t;t=j;i++}external=true;t.d.length=k+1;return t}function toLessThanHalfPi(Ctor,x){var t,isNeg=x.s<0,pi=getPi(Ctor,Ctor.precision,1),halfPi=pi.times(.5);x=x.abs();if(x.lte(halfPi)){quadrant=isNeg?4:1;return x}t=x.divToInt(pi);if(t.isZero()){quadrant=isNeg?3:2}else{x=x.minus(t.times(pi));if(x.lte(halfPi)){quadrant=isOdd(t)?isNeg?2:3:isNeg?4:1;return x}quadrant=isOdd(t)?isNeg?1:4:isNeg?3:2}return x.minus(pi).abs()}function toStringBinary(x,baseOut,sd,rm){var base,e,i,k,len,roundUp,str,xd,y,Ctor=x.constructor,isExp=sd!==void 0;if(isExp){checkInt32(sd,1,MAX_DIGITS);if(rm===void 0)rm=Ctor.rounding;else checkInt32(rm,0,8)}else{sd=Ctor.precision;rm=Ctor.rounding}if(!x.isFinite()){str=nonFiniteToString(x)}else{str=finiteToString(x);i=str.indexOf(".");if(isExp){base=2;if(baseOut==16){sd=sd*4-3}else if(baseOut==8){sd=sd*3-2}}else{base=baseOut}if(i>=0){str=str.replace(".","");y=new Ctor(1);y.e=str.length-i;y.d=convertBase(finiteToString(y),10,base);y.e=y.d.length}xd=convertBase(str,10,base);e=len=xd.length;for(;xd[--len]==0;)xd.pop();if(!xd[0]){str=isExp?"0p+0":"0"}else{if(i<0){e--}else{x=new Ctor(x);x.d=xd;x.e=e;x=divide(x,y,sd,rm,0,base);xd=x.d;e=x.e;roundUp=inexact}i=xd[sd];k=base/2;roundUp=roundUp||xd[sd+1]!==void 0;roundUp=rm<4?(i!==void 0||roundUp)&&(rm===0||rm===(x.s<0?3:2)):i>k||i===k&&(rm===4||roundUp||rm===6&&xd[sd-1]&1||rm===(x.s<0?8:7));xd.length=sd;if(roundUp){for(;++xd[--sd]>base-1;){xd[sd]=0;if(!sd){++e;xd.unshift(1)}}}for(len=xd.length;!xd[len-1];--len);for(i=0,str="";i<len;i++)str+=NUMERALS.charAt(xd[i]);if(isExp){if(len>1){if(baseOut==16||baseOut==8){i=baseOut==16?4:3;for(--len;len%i;len++)str+="0";xd=convertBase(str,base,baseOut);for(len=xd.length;!xd[len-1];--len);for(i=1,str="1.";i<len;i++)str+=NUMERALS.charAt(xd[i])}else{str=str.charAt(0)+"."+str.slice(1)}}str=str+(e<0?"p":"p+")+e}else if(e<0){for(;++e;)str="0"+str;str="0."+str}else{if(++e>len)for(e-=len;e--;)str+="0";else if(e<len)str=str.slice(0,e)+"."+str.slice(e)}}str=(baseOut==16?"0x":baseOut==2?"0b":baseOut==8?"0o":"")+str}return x.s<0?"-"+str:str}function truncate(arr,len){if(arr.length>len){arr.length=len;return true}}function abs(x){return new this(x).abs()}function acos(x){return new this(x).acos()}function acosh(x){return new this(x).acosh()}function add(x,y){return new this(x).plus(y)}function asin(x){return new this(x).asin()}function asinh(x){return new this(x).asinh()}function atan(x){return new this(x).atan()}function atanh(x){return new this(x).atanh()}function atan2(y,x){y=new this(y);x=new this(x);var r,pr=this.precision,rm=this.rounding,wpr=pr+4;if(!y.s||!x.s){r=new this(NaN)}else if(!y.d&&!x.d){r=getPi(this,wpr,1).times(x.s>0?.25:.75);r.s=y.s}else if(!x.d||y.isZero()){r=x.s<0?getPi(this,pr,rm):new this(0);r.s=y.s}else if(!y.d||x.isZero()){r=getPi(this,wpr,1).times(.5);r.s=y.s}else if(x.s<0){this.precision=wpr;this.rounding=1;r=this.atan(divide(y,x,wpr,1));x=getPi(this,wpr,1);this.precision=pr;this.rounding=rm;r=y.s<0?r.minus(x):r.plus(x)}else{r=this.atan(divide(y,x,wpr,1))}return r}function cbrt(x){return new this(x).cbrt()}function ceil(x){return finalise(x=new this(x),x.e+1,2)}function config(obj){if(!obj||typeof obj!=="object")throw Error(decimalError+"Object expected");var i,p,v,useDefaults=obj.defaults===true,ps=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-EXP_LIMIT,0,"toExpPos",0,EXP_LIMIT,"maxE",0,EXP_LIMIT,"minE",-EXP_LIMIT,0,"modulo",0,9];for(i=0;i<ps.length;i+=3){if(p=ps[i],useDefaults)this[p]=DEFAULTS[p];if((v=obj[p])!==void 0){if(mathfloor(v)===v&&v>=ps[i+1]&&v<=ps[i+2])this[p]=v;else throw Error(invalidArgument+p+": "+v)}}if(p="crypto",useDefaults)this[p]=DEFAULTS[p];if((v=obj[p])!==void 0){if(v===true||v===false||v===0||v===1){if(v){if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)){this[p]=true}else{throw Error(cryptoUnavailable)}}else{this[p]=false}}else{throw Error(invalidArgument+p+": "+v)}}return this}function cos(x){return new this(x).cos()}function cosh(x){return new this(x).cosh()}function clone(obj){var i,p,ps;function Decimal(v){var e,i,t,x=this;if(!(x instanceof Decimal))return new Decimal(v);x.constructor=Decimal;if(v instanceof Decimal){x.s=v.s;x.e=v.e;x.d=(v=v.d)?v.slice():v;return}t=typeof v;if(t==="number"){if(v===0){x.s=1/v<0?-1:1;x.e=0;x.d=[0];return}if(v<0){v=-v;x.s=-1}else{x.s=1}if(v===~~v&&v<1e7){for(e=0,i=v;i>=10;i/=10)e++;x.e=e;x.d=[v];return}else if(v*0!==0){if(!v)x.s=NaN;x.e=NaN;x.d=null;return}return parseDecimal(x,v.toString())}else if(t!=="string"){throw Error(invalidArgument+v)}if(v.charCodeAt(0)===45){v=v.slice(1);x.s=-1}else{x.s=1}return isDecimal.test(v)?parseDecimal(x,v):parseOther(x,v)}Decimal.prototype=P;Decimal.ROUND_UP=0;Decimal.ROUND_DOWN=1;Decimal.ROUND_CEIL=2;Decimal.ROUND_FLOOR=3;Decimal.ROUND_HALF_UP=4;Decimal.ROUND_HALF_DOWN=5;Decimal.ROUND_HALF_EVEN=6;Decimal.ROUND_HALF_CEIL=7;Decimal.ROUND_HALF_FLOOR=8;Decimal.EUCLID=9;Decimal.config=Decimal.set=config;Decimal.clone=clone;Decimal.isDecimal=isDecimalInstance;Decimal.abs=abs;Decimal.acos=acos;Decimal.acosh=acosh;Decimal.add=add;Decimal.asin=asin;Decimal.asinh=asinh;Decimal.atan=atan;Decimal.atanh=atanh;Decimal.atan2=atan2;Decimal.cbrt=cbrt;Decimal.ceil=ceil;Decimal.cos=cos;Decimal.cosh=cosh;Decimal.div=div;Decimal.exp=exp;Decimal.floor=floor;Decimal.hypot=hypot;Decimal.ln=ln;Decimal.log=log;Decimal.log10=log10;Decimal.log2=log2;Decimal.max=max;Decimal.min=min;Decimal.mod=mod;Decimal.mul=mul;Decimal.pow=pow;Decimal.random=random;Decimal.round=round;Decimal.sign=sign;Decimal.sin=sin;Decimal.sinh=sinh;Decimal.sqrt=sqrt;Decimal.sub=sub;Decimal.tan=tan;Decimal.tanh=tanh;Decimal.trunc=trunc;if(obj===void 0)obj={};if(obj){if(obj.defaults!==true){ps=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"];for(i=0;i<ps.length;)if(!obj.hasOwnProperty(p=ps[i++]))obj[p]=this[p]}}Decimal.config(obj);return Decimal}function div(x,y){return new this(x).div(y)}function exp(x){return new this(x).exp()}function floor(x){return finalise(x=new this(x),x.e+1,3)}function hypot(){var i,n,t=new this(0);external=false;for(i=0;i<arguments.length;){n=new this(arguments[i++]);if(!n.d){if(n.s){external=true;return new this(1/0)}t=n}else if(t.d){t=t.plus(n.times(n))}}external=true;return t.sqrt()}function isDecimalInstance(obj){return obj instanceof Decimal||obj&&obj.name==="[object Decimal]"||false}function ln(x){return new this(x).ln()}function log(x,y){return new this(x).log(y)}function log2(x){return new this(x).log(2)}function log10(x){return new this(x).log(10)}function max(){return maxOrMin(this,arguments,"lt")}function min(){return maxOrMin(this,arguments,"gt")}function mod(x,y){return new this(x).mod(y)}function mul(x,y){return new this(x).mul(y)}function pow(x,y){return new this(x).pow(y)}function random(sd){var d,e,k,n,i=0,r=new this(1),rd=[];if(sd===void 0)sd=this.precision;else checkInt32(sd,1,MAX_DIGITS);k=Math.ceil(sd/LOG_BASE);if(!this.crypto){for(;i<k;)rd[i++]=Math.random()*1e7|0}else if(crypto.getRandomValues){d=crypto.getRandomValues(new Uint32Array(k));for(;i<k;){n=d[i];if(n>=429e7){d[i]=crypto.getRandomValues(new Uint32Array(1))[0]}else{rd[i++]=n%1e7}}}else if(crypto.randomBytes){d=crypto.randomBytes(k*=4);for(;i<k;){n=d[i]+(d[i+1]<<8)+(d[i+2]<<16)+((d[i+3]&127)<<24);if(n>=214e7){crypto.randomBytes(4).copy(d,i)}else{rd.push(n%1e7);i+=4}}i=k/4}else{throw Error(cryptoUnavailable)}k=rd[--i];sd%=LOG_BASE;if(k&&sd){n=mathpow(10,LOG_BASE-sd);rd[i]=(k/n|0)*n}for(;rd[i]===0;i--)rd.pop();if(i<0){e=0;rd=[0]}else{e=-1;for(;rd[0]===0;e-=LOG_BASE)rd.shift();for(k=1,n=rd[0];n>=10;n/=10)k++;if(k<LOG_BASE)e-=LOG_BASE-k}r.e=e;r.d=rd;return r}function round(x){return finalise(x=new this(x),x.e+1,this.rounding)}function sign(x){x=new this(x);return x.d?x.d[0]?x.s:0*x.s:x.s||NaN}function sin(x){return new this(x).sin()}function sinh(x){return new this(x).sinh()}function sqrt(x){return new this(x).sqrt()}function sub(x,y){return new this(x).sub(y)}function tan(x){return new this(x).tan()}function tanh(x){return new this(x).tanh()}function trunc(x){return finalise(x=new this(x),x.e+1,1)}Decimal=clone(DEFAULTS);Decimal["default"]=Decimal.Decimal=Decimal;LN10=new Decimal(LN10);PI=new Decimal(PI);if(typeof define=="function"&&define.amd){define(function(){return Decimal})}else if(typeof module!="undefined"&&module.exports){module.exports=Decimal}else{if(!globalScope){globalScope=typeof self!="undefined"&&self&&self.self==self?self:window}noConflict=globalScope.Decimal;Decimal.noConflict=function(){globalScope.Decimal=noConflict;return Decimal};globalScope.Decimal=Decimal}})(this);if(typeof exports!=="undefined"){var Decimal=require("decimal").Decimal}function YReal(n){this.n=Decimal.Decimal(n);this.add=function(other){return new YReal(this.n.add(other.n))};this.negate=function(){return new YReal(this.n.negated())};this.subtract=function(other){return new YReal(this.n.sub(other.n))};this.multiply=function(other){return new YReal(this.n.mul(other.n))};this.divide=function(other){return new YReal(this.n.div(other.n))};this.reciprocal=function(){var one=new YReal(1);return one.divide(this)};this.log=function(){return new YReal(this.n.log())};this.ln=function(){return new YReal(this.n.ln())};this.exp=function(){return new YReal(this.n.exp())};this.sin=function(){return new YReal(this.n.sin())};this.cos=function(){return new YReal(this.n.cos())};this.tan=function(){return new YReal(this.n.tan())};this.sqrt=function(){return new YReal(this.n.sqrt())};this.acos=function(){return new YReal(this.n.acos())};this.asin=function(){return new YReal(this.n.asin())};this.atan=function(){return new YReal(this.n.atan())};this.pow=function(other){return new YReal(this.n.pow(other.n))};this.floor=function(){return new YReal(this.n.floor())};this.ceil=function(){return new YReal(this.n.ceil())};this.abs=function(){return new YReal(this.n.abs())};this.pi=function(){return new YReal(Decimal.acos(-1))};this.bitwise_op=function(a,b,op){var c=Decimal.Decimal(0);var w=64;var s=2;var as=a.comparedTo(0)<0;var bs=b.comparedTo(0)<0;var ai=a.abs().floor();var bi=b.abs().floor();var n;for(n=0;n<w;n++){var an=ai.modulo(s).floor().toNumber();var bn=bi.modulo(s).floor().toNumber();var cn=op(an,bn);if(cn!=0){c=c.add(Decimal.pow(2,n))}ai=ai.div(s).floor();bi=bi.div(s).floor()}var cs=op(as,bs);if(cs!=0){c=c.negated()}return c};this.bitwise_and=function(a,b){return this.bitwise_op(a,b,function(m,n){return m&n})};this.bitwise_or=function(a,b){return this.bitwise_op(a,b,function(m,n){return m|n})};this.bitwise_xor=function(a,b){return this.bitwise_op(a,b,function(m,n){return m^n})};this.and=function(other){return new YReal(this.bitwise_and(this.n,other.n))};this.or=function(other){return new YReal(this.bitwise_or(this.n,other.n))};this.xor=function(other){return new YReal(this.bitwise_xor(this.n,other.n))};this.invert=function(){var p;if(this.n.comparedTo(0)<0){p=this.n.negated().sub(1)}else{p=this.n.add(1).negated()}return new YReal(p)};this.eng_format=function(s){var dp=s.indexOf(".");var ep=s.indexOf("e");if(ep>0&&dp>0){var exp=s.slice(ep+1);var emd=Math.abs(exp)%3;if(emd!=0){if(exp<0){emd=3-emd}exp-=emd;var intg=s.slice(0,dp);var frac=s.slice(dp+1,ep);while(emd-- >0){intg+=frac.slice(0,1);frac=frac.substr(1);frac+="0"}if(exp>=0){exp="+"+exp}s=intg+"."+frac+"e"+exp}}return s};this.decimal_format=function(fmt){var s=this.n;switch(fmt.real.mode){case 0:s=this.n.toFixed();break;case 1:s=this.n.toFixed(fmt.real.prec);break;case 2:s=this.n.toExponential(fmt.real.prec);break;case 3:s=this.eng_format(s.toExponential(fmt.real.prec));break}return s};this.str_reverse=function(s){return s.split("").reverse().join("")};this.to_str=function(num,base){var s="";var n=num;var d;var a;var ns=n.comparedTo(0)<0;n=n.abs();do{d=Math.floor(n.modulo(base).toNumber());n=n.div(base).floor();if(d<10){a=48}else{a=87}s+=String.fromCodePoint(d+a)}while(!n.isZero());s=this.str_reverse(s);if(ns){s="-"+s}return s};this.format=function(fmt){if(fmt.base==10){return this.decimal_format(fmt)}else{return this.to_str(this.n.floor(),fmt.base)}};this.isInteger=function(){return this.n.isInteger()};this.isRational=function(){return this.isInteger()};this.isReal=function(){return true};this.isNaN=function(){return this.n.isNaN()};this.zero_equal=function(){return this.n.isZero()};this.sgn=function(){return this.n.isNegative()?-1:this.n.isZero()?0:1};this.modulo=function(other){return new YReal(this.n.modulo(other.n))};this.toFloat=function(){return new YReal(this.n)};this.generalize=function(){return this.toFloat()};this.sinh=function(){return new YReal(this.n.sinh())};this.cosh=function(){return new YReal(this.n.cosh())};this.tanh=function(){return new YReal(this.n.tanh())};this.asinh=function(){return new YReal(this.n.asinh())};this.acosh=function(){return new YReal(this.n.acosh())};this.atanh=function(){return new YReal(this.n.atanh())};this.atan2=function(other){return new YReal(Decimal.atan2(this.n,other.n))};this.value=function(){return this.n};this.split=function(){var i=this.floor();return[this.subtract(i),i]};this.construct=function(n){return new YReal(n)}}if(typeof exports!=="undefined"){exports.YReal=YReal}function YRational(num,den){this.gcd=function(a,b){var t;while(!b.zero_equal()){t=a;a=b;b=t.modulo(b)}return a};this.abs=function(){return new YRational(this.num.abs(),this.den)};this.pi=function(){return new YRational(this.num.pi(),this.den.construct(1))};this.add=function(other){var n1=this.num.multiply(other.den);var n2=this.den.multiply(other.num);var n3=this.den.multiply(other.den);return new YRational(n1.add(n2),n3)};this.divide=function(other){return new YRational(this.num.multiply(other.den),this.den.multiply(other.num))};this.subtract=function(other){var n1=this.num.multiply(other.den);var n2=this.den.multiply(other.num);return new YRational(n1.subtract(n2),this.den.multiply(other.den))};this.multiply=function(other){return new YRational(this.num.multiply(other.num),this.den.multiply(other.den))};this.negate=function(){return new YRational(this.num.negate(),this.den)};this.reciprocal=function(){return new YRational(this.den,this.num)};this.toFloat=function(){return this.num.divide(this.den)};this.generalize=function(){return this.toFloat()};this.floor=function(){return new YRational(this.toFloat().floor(),this.den.construct(1))};this.ceil=function(){return new YRational(this.toFloat().ceil(),this.den.construct(1))};this.isInteger=function(){return false};this.isRational=function(){return this.num.isInteger()&&this.den.isInteger()};this.isReal=function(){return false};this.isNaN=function(){return this.num.isNaN()||this.den.isNaN()};this.zero_equal=function(){return this.num.zero_equal()};this.sgn=function(){return this.num.sgn()};this.modulo=function(other){var a=this.divide(other);var b=a.floor();var c=other.multiply(b);return this.subtract(c)};this.sinh=function(){return this.toFloat().sinh()};this.cosh=function(){return this.toFloat().cosh()};this.atan2=function(other){return this.toFloat().atan2(other.toFloat())};this.log=function(){return this.toFloat().log()};this.ln=function(){return this.toFloat().ln()};this.exp=function(){return this.toFloat().exp()};this.sin=function(){return this.toFloat().sin()};this.cos=function(){return this.toFloat().cos()};this.tan=function(){return this.toFloat().tan()};this.sqrt=function(){return this.toFloat().sqrt()};this.asin=function(){return this.toFloat().asin()};this.acos=function(){return this.toFloat().acos()};this.atan=function(){return this.toFloat().atan()};this.and=function(other){return new YRational(this.num.and(other.num),this.den.and(other.den))};this.or=function(other){return new YRational(this.num.or(other.num),this.den.and(other.den))};this.xor=function(other){return new YRational(this.num.xor(other.num),this.den.and(other.den))};this.invert=function(){return new YRational(this.num.invert(),this.den.invert())};this.pow=function(other){return this.toFloat().pow(other.toFloat())};this.value=function(){return this.toFloat().value()};this.split=function(){return[this.den,this.num]};this.format=function(fmt){var sep="/";return this.num.format(fmt)+sep+this.den.format(fmt)};this.num=num;this.den=den;if(this.den.sgn()<0){this.num=this.num.negate();this.den=this.den.negate()}if(this.isRational()){var g=this.gcd(this.num.abs(),this.den);this.num=this.num.divide(g);this.den=this.den.divide(g)}}if(typeof exports!=="undefined"){exports.YRational=YRational}function YComplex(re,im){this.re=re;this.im=im;this.argument=function(){return this.im.atan2(this.re)};this.modulus=function(){var re2=this.re.multiply(this.re);var im2=this.im.multiply(this.im);return re2.add(im2).sqrt()};this.add=function(other){return new YComplex(this.re.add(other.re),this.im.add(other.im))};this.negate=function(){return new YComplex(this.re.negate(),this.im.negate())};this.subtract=function(other){return this.add(other.negate())};this.multiply=function(other){var a=this.re.multiply(other.re).subtract(this.im.multiply(other.im));var b=this.im.multiply(other.re).add(this.re.multiply(other.im));return new YComplex(a,b)};this.divide=function(other){var q=other.re.multiply(other.re).add(other.im.multiply(other.im));var a=this.re.multiply(other.re).add(this.im.multiply(other.im));var b=this.im.multiply(other.re).subtract(this.re.multiply(other.im));return new YComplex(a.divide(q),b.divide(q))};this.reciprocal=function(){var q=this.re.multiply(this.re).add(this.im.multiply(this.im));return new YComplex(this.re.divide(q),this.im.divide(q).negate())};this.ln=function(){return new YComplex(this.modulus().ln(),this.argument())};this.log=function(){var TEN=new YComplex(this.re.construct(10),this.im.construct(0));return this.ln().divide(TEN.ln())};this.exp=function(){var a=new YComplex(this.re.exp(),this.im.construct(0));var b=new YComplex(this.im.cos(),this.im.sin());return a.multiply(b)};this.sin=function(){return new YComplex(this.re.sin().multiply(this.im.cosh()),this.re.cos().multiply(this.im.sinh()))};this.cos=function(){return new YComplex(this.re.cos().multiply(this.im.cosh()),this.re.sin().multiply(this.im.sinh()).negate())};this.tan=function(){return this.sin().divide(this.cos())};this.sqrt=function(){var TWO=new YComplex(this.re.construct(2),this.im.construct(0));return this.pow(TWO.reciprocal())};this.acos=function(){var I=new YComplex(this.re.construct(0),this.im.construct(1));var ONE=new YComplex(this.re.construct(1),this.im.construct(0));var z2=this.multiply(this);var c=ONE.subtract(z2);var b=I.multiply(c.sqrt());var a=this.add(b);return a.ln().divide(I)};this.asin=function(){var PI_TWO=new YComplex(this.re.pi().divide(this.re.construct(2)),this.im.construct(0));return PI_TWO.subtract(this.acos())};this.atan=function(){var I=new YComplex(this.re.construct(0),this.im.construct(1));var TWO=new YComplex(this.re.construct(2),this.im.construct(0));var a1=I.subtract(this);var a2=I.add(this);var a=a1.divide(a2).ln();var b=TWO.multiply(I);return a.divide(b)};this.atan2=function(other){var I=new YComplex(this.re.construct(0),this.im.construct(1));var yi=other.multiply(I);var x_yi=this.add(yi);var x2=this.multiply(this);var y2=other.multiply(other);var x2y2=x2.add(y2);var sxy=x2y2.sqrt();var xyi_sxy=x_yi.divide(sxy);var ln_xy=xyi_sxy.ln();var ineg=I.negate();var z=ineg.multiply(ln_xy);return z};this.pow=function(other){return other.multiply(this.ln()).exp()};this.conjugate=function(){return new YComplex(this.re,this.im.negate())};this.isInteger=function(){return false};this.isRational=function(){return this.re.isRational()&&this.im.isRational()};this.isReal=function(){return this.re.isReal()&&this.im.isReal()};this.isNaN=function(){return this.re.isNaN()||this.im.isNaN()};this.toFloat=function(){return this.modulus()};this.generalize=function(){return new YComplex(this.re.generalize(),this.im.generalize())};this.zero_equal=function(){return this.re.zero_equal()&&this.im.zero_equal()};this.sgn=function(){var v;if(this.zero_equal()){v=0}else{v=this.re.sgn();if(v==0){v=this.im.sgn()}}return v};this.floor=function(){return new YComplex(this.re.floor(),this.im.floor())};this.ceil=function(){return new YComplex(this.re.ceil(),this.im.ceil())};this.abs=function(){return this.modulus()};this.pi=function(){return new YComplex(this.re.pi(),this.im.construct(0))};this.and=function(other){return new YComplex(this.re.and(other.re),this.im.and(other.im))};this.or=function(other){return new YComplex(this.re.or(other.re),this.im.or(other.im))};this.xor=function(other){return new YComplex(this.re.xor(other.re),this.im.xor(other.im))};this.invert=function(){return new YComplex(this.re.invert(),this.im.invert())};this.value=function(){return this.toFloat().value()};this.split=function(){return[this.im,this.re]};this.modulo=function(other){var a=this.divide(other);var b=a.floor();var c=other.multiply(b);return this.subtract(c)};this.format=function(fmt){var re_s=this.re.format(fmt);var im_s=this.im.format(fmt);var s=re_s;if(this.im.sgn()<0){if(im_s.charAt(0)!="-"){s+="-"}}else{s+="+"}s+=im_s;s+="i";return s}}if(typeof exports!=="undefined"){exports.YComplex=YComplex}if(typeof exports!=="undefined"){var YReal_p=require("yreal");var YRational_p=require("yrational");var YComplex_p=require("ycomplex");var YReal=YReal_p.YReal;var YRational=YRational_p.YRational;var YComplex=YComplex_p.YComplex}function YNumber(){this.coercion_error=function(s,t){throw new Error("unsupported coersion "+s+" "+JSON.stringify(t))};this.complex_coerce_prim=function(x,y){if(x.isRational()){x=new YComplex(new YRational(x.re,new YReal(1)),new YRational(x.im,new YReal(1)))}else{y=y.generalize()}return[x,y]};this.complex_coerce=function(x,y){var xy;if(x.isReal()!=y.isReal()){if(x.isReal()){xy=this.complex_coerce_prim(x,y);x=xy[0];y=xy[1]}else{xy=this.complex_coerce_prim(y,x);x=xy[1];y=xy[0]}}return[x,y]};this.coerce=function(x,y){var xy;if(x instanceof YComplex){if(y instanceof YComplex){xy=this.complex_coerce(x,y);x=xy[0];y=xy[1]}else if(y instanceof YRational){y=new YComplex(new YRational(y.num,y.den),new YRational(new YReal(0),new YReal(1)));xy=this.complex_coerce(x,y);x=xy[0];y=xy[1]}else if(y instanceof YReal){y=new YComplex(y,new YReal(0));xy=this.complex_coerce(x,y);x=xy[0];y=xy[1]}else{this.coercion_error("from",y)}}else if(x instanceof YRational){if(y instanceof YComplex){x=new YComplex(new YRational(x.num,x.den),new YRational(new YReal(0),new YReal(1)));xy=this.complex_coerce(x,y);x=xy[0];y=xy[1]}else if(y instanceof YRational){}else if(y instanceof YReal){y=new YRational(y,new YReal(1))}else{this.coercion_error("from",y)}}else if(x instanceof YReal){if(y instanceof YComplex){x=new YComplex(x,new YReal(0));xy=this.complex_coerce(x,y);x=xy[0];y=xy[1]}else if(y instanceof YRational){x=new YRational(x,new YReal(1))}else if(y instanceof YReal){}else{this.coercion_error("from",y)}}else{this.coercion_error("to",x)}return[x,y]};this.rcoerce=function(inconsistent,x){if(inconsistent){x=x.generalize()}return new YNumber(x)};this.uop=function(x,func){var xr=x.isRational();var y=x.n[func]();var yr=y.isRational();var inconsistent=xr!=yr;return this.rcoerce(inconsistent,y)};this.binop=function(x,y,func){var xy=this.coerce(x.n,y.n);var xr=x.isRational();var yr=y.isRational();x=xy[0];y=xy[1];var z=x[func](y);var zr=z.isRational();var inconsistent=!(xr==yr&&yr==zr);return this.rcoerce(inconsistent,z)};this.add=function(other){return this.binop(this,other,"add")};this.negate=function(){return this.uop(this,"negate")};this.subtract=function(other){return this.binop(this,other,"subtract")};this.multiply=function(other){return this.binop(this,other,"multiply")};this.divide=function(other){return this.binop(this,other,"divide")};this.reciprocal=function(){return this.uop(this,"reciprocal")};this.log=function(){return this.uop(this,"log")};this.ln=function(){return this.uop(this,"ln")};this.exp=function(){return this.uop(this,"exp")};this.sin=function(){return this.uop(this,"sin")};this.cos=function(){return this.uop(this,"cos")};this.tan=function(){return this.uop(this,"tan")};this.sqrt=function(){return this.uop(this,"sqrt")};this.acos=function(){return this.uop(this,"acos")};this.asin=function(){return this.uop(this,"asin")};this.atan=function(){return this.uop(this,"atan")};this.pow=function(other){return this.binop(this,other,"pow")};this.floor=function(){return this.uop(this,"floor")};this.ceil=function(){return this.uop(this,"ceil")};this.abs=function(){return this.uop(this,"abs")};this.pi=function(){return this.uop(this,"pi")};this.and=function(other){return this.binop(this,other,"and")};this.or=function(other){return this.binop(this,other,"or")};this.xor=function(other){return this.binop(this,other,"xor")};this.invert=function(){return this.uop(this,"invert")};this.isInteger=function(){return this.n.isInteger()};this.isRational=function(){return this.n.isRational()};this.isNaN=function(){return this.n.isNaN()};this.isReal=function(){return this.n.isReal()};this.zero_equal=function(){return this.n.zero_equal()};this.sgn=function(){return this.n.sgn()};this.signum=function(){return new YNumber(this.n.sgn())};this.modulo=function(other){return this.binop(this,other,"modulo")};this.toFloat=function(){return this.uop(this,"toFloat")};this.sinh=function(){return this.uop(this,"sinh")};this.cosh=function(){return this.uop(this,"cosh")};this.tanh=function(){return this.uop(this,"tanh")};this.asinh=function(){return this.uop(this,"asinh")};this.acosh=function(){return this.uop(this,"acosh")};this.atanh=function(){return this.uop(this,"atanh")};this.atan2=function(other){return this.binop(this,other,"atan2")};this.value=function(){return this.n.value()};this.split=function(){return this.n.split()};this.default_format={base:10,real:{mode:0,prec:4},rational:{sep1:" ",sep2:"/",limit:0,proper:true,xflag:"*"},complex:{s:"+",i:"i"}};this.format=function(fmt){if(arguments.length==0){fmt=this.default_format}var s=this.n.format(fmt);return s};switch(arguments.length){case 1:if(arguments[0]instanceof YNumber){this.n=arguments[0].n}else if(arguments[0]instanceof YReal){this.n=arguments[0]}else if(arguments[0]instanceof YRational){this.n=arguments[0]}else if(arguments[0]instanceof YComplex){this.n=arguments[0]}else{this.n=new YReal(arguments[0])}break;case 2:this.n=new YRational(new YReal(arguments[0]),new YReal(arguments[1]));break;case 3:this.n=new YComplex(new YReal(arguments[1]),new YReal(arguments[2]));break;case 4:this.n=new YComplex(new YRational(new YReal(arguments[0]),new YReal(arguments[1])),new YRational(new YReal(arguments[2]),new YReal(arguments[3])));break;default:throw new Error("oops")}}if(typeof exports!=="undefined"){exports.YNumber=YNumber}function YRX(setup){this.version="YRX v2.0.0";this.setup=setup;this.config_name="";this.vm=setup.vm;this.reset=function(){this.vm.reset();this.state.edit="";this.state.error="";this.state.modifier="";this.state.angle="";this.state.base="";this.state.shift="";this.state.prev_shift="";this.state.keypad="";this.state.recording=false;this.state.macro="";this.unshift();this.view_model.m("");this.updateDisplay()};this.fclear=function(desc,action){this.reset()};this.ke={kind:{shift:"input",op:"input",dialog:"dialog",digit:"input",edit:"edit"},dialog:["about","config","cdata"],edit:["enter","backspace","fclear","chs","record","macro"]};this.state={edit:new String,editing:false,edit_base:0,modifier:"",error:"",shift:"",prev_shift:"",keypad:"",keyidx:-1,base:"",angle:"",display:"float",digits:4};this.rnum=/^([0-9]*)\.([0-9]+)\.([0-9]+)$/;this.cnum=/^([^c]+)c([^c]+)$/;this.bnum=/^\.\.([0-9]+)\.([0-9a-f]+)$/;this.unshift=function(){this.shift({arg:"default"})};this.exec=function(name){var ok=this.vm.evaluate(name,this.config.step_limit);if(!ok){this.view_model.m(this.vm.e)}else if(this.vm.busy){this.view_model.m("step limit exceeded")}return ok};this.noop=function(desc,action){return false};this.shift=function(desc,action){var name=desc.arg;if(name==this.state.shift||name=="default"){name="default";this.state.shift=""}else{this.state.shift=name}var keypad=this.config.keypad[this.view_model.orientation][name];var i;if(keypad==null){console.log("keypad name '"+name+"' is not defined");return}for(i=0;i<keypad.length;i++){var newdesc=this.config.desc[keypad[i]];this.view_model.k(i,newdesc.label,name)}while(i<this.config.keypad.portrait.default.length){this.view_model.k(i,"",name);i++}this.view_model.a(11,name=="default"?"":name);if(i>this.config.keypad.portrait.default.length){console.log("keypad "+name+" ("+i+") too long")}return false};this.modifier=function(desc,action){this.state.modifier=desc.arg;return false};this.backspace=function(desc,action){var state=this.state;var update=false;if(state.edit.length>0){state.edit=state.edit.slice(0,-1);this.view_model.d(-1,state.edit,true)}else if(this.vm.f.length>0){this.exec("fdrop");update=true}return update};this.enter=function(desc,action){var update=false;if(this.state.editing>0){update=this.pushEdit()}else{this.exec("fdup");update=true}return update};this.chs=function(desc,action){var update=false;if(this.state.editing>0){var idx=-1;if(this.state.edit_base==10){var csep=this.state.edit.indexOf("c");idx=this.state.edit.lastIndexOf("e");if(csep>0&&csep>idx){idx=csep}}if(idx>=0&&this.state.edit.length>idx){if(this.state.edit.charAt(idx+1)=="-"){var before=this.state.edit.slice(0,idx+1);var after=this.state.edit.slice(idx+2);this.state.edit=before+after}else{var before=this.state.edit.slice(0,idx+1);var after=this.state.edit.slice(idx+1);this.state.edit=before+"-"+after}}else{if(this.state.edit.charAt(0)=="-"){this.state.edit=this.state.edit.slice(1)}else{this.state.edit="-"+this.state.edit}}this.view_model.d(-1,this.state.edit,true)}else{this.exec("fnegate");update=true}return update};this.record=function(desc,action){this.state.recording=!this.state.recording;if(this.state.recording){this.state.macro=""}return true};this.macro=function(desc,action){this.exec(this.state.macro);return true};this.digit=function(desc,action){if(this.state.editing==false){this.state.editing=true;for(var i=1;i<this.config.display[this.view_model.orientation].height;i++){this.view_model.d(i-1,this.view_model.d(i))}this.state.edit_base=this.vm.lookup("base")}this.state.edit+=desc.arg;this.view_model.d(-1,this.state.edit,true);return false};this.edit=function(desc,action){return this[desc.arg](desc,action)};this.op=function(desc,action){var valid=false;if(this.state.editing>0){valid=this.pushEdit()}else{valid=true}if(valid){if(this.exec(desc.arg)){if(this.state.recording){this.appendMacro(desc.arg)}}else{this.clearMacro()}this.state.prev_shift="";this.unshift()}return true};this.operation=function(entry,action){var keypad=entry[0];var keyidx=entry[1];var descidx=this.config.keypad[this.view_model.orientation][keypad][keyidx];var desc=this.config.desc[descidx];var is_shift=desc.op=="shift";var normal=true;var macro;this.view_model.m("");this.state.keypad=keypad;this.state.keyidx=keyidx;if(this.state.modifier!=""){if(is_shift){normal=desc.arg!=this.state.prev_shift;this.state.prev_shift=desc.arg}else{normal=false}}if(normal){if(this[desc.op](desc,action)){this.updateDisplay()}}else{switch(this.state.modifier){case"?":break;default:break}this.state.prev_shift="";this.state.modifier=""}var b=this.vm.lookup("base");this.state.base=b==10?"":b;switch(this.vm.lookup("angle-mode")){case 0:this.state.angle="r";break;case 1:this.state.angle="";break
;case 2:this.state.angle="g";break;default:this.state.angle="?";break}if(this.state.recording){macro="R"}else if(this.state.macro&&this.state.macro.length>0){macro="P"}this.view_model.a(0,this.state.error);this.view_model.a(1,this.state.modifier);this.view_model.a(2,this.state.base);this.view_model.a(3,this.state.angle);this.view_model.a(4,macro)};this.dialog=function(desc,action){this.view_model[desc.arg].v(true);this.unshift();return false};this.convertNumeric=function(str){var v=[];var a;var base=this.state.edit_base;if(a=str.match(this.rnum)){var s=a[1].length==0?"0":a[1];var i=this.vm.parse_int(s,base);var num=this.vm.parse_int(a[2],base);var den=this.vm.parse_int(a[3],base);if(!i.isNaN()&&!num.isNaN()&&!den.isNaN()){num=num.add(i.multiply(den));v.push("r");v.push(num);v.push(den)}}else if(base==10){if(a=str.match(this.cnum)){var re=this.vm.parse_float(a[1]);var im=this.vm.parse_float(a[2]);if(!re.isNaN()&&!im.isNaN()){v.push("c");v.push(re);v.push(im)}}else if(a=str.match(this.bnum)){base=this.vm.parse_int(a[1],10);if(!base.isNaN()){var n=this.vm.parse_int(a[2],base);if(!n.isNaN()){v.push("n");v.push(n)}}else{console.log("Error converting base")}}else{var n=this.vm.parse_float(str);if(!n.isNaN()){v.push("n");v.push(n)}}}else{var n=this.vm.parse_int(str,base);if(!n.isNaN()){v.push("n");v.push(n)}}return v};this.appendMacro=function(s){this.state.macro+=" ";this.state.macro+=s};this.clearMacro=function(s){this.state.recording=false;this.state.macro=""};this.pushEdit=function(){var valid=false;if(this.state.edit.length>0){var v=this.convertNumeric(this.state.edit);valid=v.length>0;if(valid){if(v[0]=="n"){this.vm.fpush(v[1]);if(this.state.recording){this.appendMacro(v[1].toExponential())}}else if(v[0]=="r"){this.vm.fpushR(v[1],v[2]);if(this.state.recording){this.appendMacro(v[1].toExponential());this.appendMacro(v[2].toExponential());this.appendMacro("rational")}}else if(v[0]=="c"){this.vm.fpushC(v[1],v[2]);if(this.state.recording){this.appendMacro(v[1].toExponential());this.appendMacro(v[2].toExponential());this.appendMacro("complex")}}else{valid=false;this.state.error="#";if(this.state.recording){this.clearMacro()}}if(valid){this.vm.evaluate("fdup lastx f!")}}else{this.state.error="!";if(this.state.recording){this.clearMacro()}}}else{valid=true}if(valid){this.state.edit="";this.state.editing=false}return valid};this.updateDisplay=function(){var n=this.config.display[this.view_model.orientation].height;var fmt={base:this.vm.lookup("base"),real:{mode:this.vm.lookup("display-num-mode"),prec:this.vm.lookup("display-num-arg")},rational:{sep1:" ",sep2:"/",limit:0,proper:true,xflag:"*"},complex:{s:"+",i:"i"}};for(var i=0;i<n;i++){var pidx=this.vm.f.length-n+i;if(pidx>=0&&pidx<this.vm.f.length){this.view_model.d(i,""+this.vm.f[pidx].format(fmt))}else{this.view_model.d(i,"")}}};this.save_config=function(){var data=JSON.stringify(this.config,null,4);if(this.hasStorage()){localStorage.setItem(this.config.name,data)}return data};this.hasStorage=function(){var v=false;try{v=localStorage!=null}catch(e){}return v};this.factory_reset=function(){if(this.hasStorage()){localStorage.removeItem(this.config_name)}this.config=new setup.cf;this.reset()};this.init=function(){var default_config=new setup.cf;var need_default=true;this.config_name=default_config.name;if(this.hasStorage()){var saved_config=localStorage.getItem(this.config_name);if(saved_config){need_default=false;this.config=JSON.parse(saved_config)}}if(need_default){this.config=default_config}for(var i=0;i<this.config.init.length;i++){var line=this.config.init[i];var ok=this.vm.evaluate(line);if(ok==false){var msg=line+":"+this.vm.e;console.log(msg)}}return this};this.set_view_model=function(view_model){this.view_model=view_model}}if(typeof exports!=="undefined"){exports.YRX=YRX}if(typeof exports!=="undefined"){var YNumber_p=require("ynumber");var YNumber=YNumber_p.YNumber}function YVM(){this.version="YVM v0.3.4";this.p=[];this.r=[];this.c=[];this.f=[];this.m=[];this.dp=0;this.e="";this.v=false;this.wp;this.ip;this.rp;this.busy=false;this.re_f=/e/;this.name="";this.body=[];this.state=false;this.parse={b:0,d:0,e:0,end:0,w:"",s:"",re_s:/\s/,re_w:/\S/};this.colon=function(){this.parse_unique_name();this.interp="colon";this.state=true};this.semis=function(){this.dict[this.name]={kind:this.interp,defn:this.body};this.state=false};this.code=function(){this.parse_unique_name();this.interp="code";this.state=true};this.end_code=function(){this.semis()};this.constant=function(){this.parse_unique_name();this.dict[this.name]={kind:"constant",defn:this.p.pop()}};this.variable=function(){this.parse_unique_name();this.dict[this.name]={kind:"variable",defn:this.dp};this.dp+=1};this.fconstant=function(){this.parse_unique_name();this.dict[this.name]={kind:"fconstant",defn:this.f.pop()}};this.allot=function(){this.dp+=this.p.pop()};this.vm_dup=function(){var x=this.p.pop();this.p.push(x);this.p.push(x)};this.vm_plus=function(){var x=this.p.pop();var y=this.p.pop();this.p.push(x+y)};this.vm_literal=function(){this.ip+=1;this.p.push(this.comp[this.wp][this.ip])};this.vm_exit=function(){if(this.r.length>0){var rtn=this.r.pop();this.wp=rtn[0];this.ip=rtn[1]}else{this.busy=false}};this.vm_fetch=function(){var x=this.p.pop();this.p.push(this.m[x])};this.vm_store=function(){var x=this.p.pop();var y=this.p.pop();this.m[x]=y};this.vm_ffetch=function(){var x=this.p.pop();this.f.push(this.m[x])};this.vm_fstore=function(){var x=this.p.pop();var y=this.f.pop();this.m[x]=y};this.vm_fdup=function(){var x=this.f.pop();this.f.push(x);this.f.push(x)};this.vm_fdrop=function(){this.f.pop()};this.vm_fover=function(){this.f.push(this.f[this.f.length-2])};this.vm_fplus=function(){var x=this.f.pop();var y=this.f.pop();this.f.push(x.add(y))};this.vm_fminus=function(){var x=this.f.pop();var y=this.f.pop();this.f.push(y.subtract(x))};this.vm_fstar=function(){var x=this.f.pop();var y=this.f.pop();this.f.push(x.multiply(y))};this.vm_fdiv=function(){var x=this.f.pop();var y=this.f.pop();this.f.push(y.divide(x))};this.vm_fmod=function(){var x=this.f.pop();var y=this.f.pop();this.f.push(y.modulo(x))};this.vm_fslashmod=function(){var x=this.f.pop();var y=this.f.pop();this.f.push(y.modulo(x));this.f.push(y.divide(x))};this.fpush=function(f){this.f.push(new YNumber(f))};this.fpushR=function(num,den){this.f.push(new YNumber(num,den))};this.fpushC=function(re,im){this.f.push(new YNumber("c",re,im))};this.vm_fliteral=function(){this.ip+=1;this.fpush(this.comp[this.wp][this.ip])};this.vm_fsqrt=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].sqrt()};this.vm_fexp=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].exp()};this.vm_fln=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].ln()};this.vm_fpow=function(){var x=this.f.pop();var y=this.f.pop();this.f.push(y.pow(x))};this.vm_frecip=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].reciprocal()};this.vm_froll=function(){var n=this.p.pop();if(n>0){var tmp=this.f[this.f.length-n-1];for(var i=this.f.length-n;i<this.f.length;i++){this.f[i-1]=this.f[i]}this.f[this.f.length-1]=tmp}else if(n<0){var tmp=this.f[this.f.length-1];for(var i=this.f.length-2;i>this.f.length+n-2;i--){this.f[i+1]=this.f[i]}this.f[this.f.length+n-1]=tmp}};this.vm_fsin=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].sin()};this.vm_fcos=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].cos()};this.vm_ftan=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].tan()};this.vm_fasin=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].asin()};this.vm_facos=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].acos()};this.vm_fatan=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].atan()};this.vm_fsinh=function(){var tos=this.f.length-1;var z=this.f[tos];if(z.isReal()){this.f[tos]=z.sinh()}else{this.vm_fdup();this.vm_fexp();this.p.push(1);this.vm_froll();this.vm_fnegate();this.vm_fexp();this.vm_fminus();this.fpush(2);this.vm_fdiv()}};this.vm_fcosh=function(){var tos=this.f.length-1;var z=this.f[tos];if(z.isReal()){this.f[tos]=z.cosh()}else{this.vm_fdup();this.vm_fexp();this.p.push(1);this.vm_froll();this.vm_fnegate();this.vm_fexp();this.vm_fplus();this.fpush(2);this.vm_fdiv()}};this.vm_ftanh=function(){var tos=this.f.length-1;var z=this.f[tos];if(z.isReal()){this.f[tos]=z.tanh()}else{this.vm_fdup();this.vm_fplus();this.vm_fexp();this.vm_fdup();this.fpush(-1);this.vm_fplus();this.p.push(1);this.vm_froll();this.fpush(1);this.vm_fplus();this.vm_fdiv()}};this.vm_fasinh=function(){var tos=this.f.length-1;var z=this.f[tos];if(z.isReal()){this.f[tos]=z.asinh()}else{this.vm_fdup();this.vm_fdup();this.vm_fstar();this.fpush(1);this.vm_fplus();this.vm_fsqrt();this.vm_fplus();this.vm_fln()}};this.vm_facosh=function(){var tos=this.f.length-1;var z=this.f[tos];if(z.isReal()){this.f[tos]=z.acosh()}else{this.vm_fdup();this.vm_fdup();this.fpush(-1);this.vm_fplus();this.vm_fsqrt();this.p.push(1);this.vm_froll();this.fpush(1);this.vm_fplus();this.vm_fsqrt();this.vm_fstar();this.vm_fplus();this.vm_fln()}};this.vm_fatanh=function(){var tos=this.f.length-1;var z=this.f[tos];if(z.isReal()){this.f[tos]=z.atanh()}else{this.vm_fdup();this.fpush(1);this.vm_fplus();this.p.push(1);this.vm_froll();this.vm_fnegate();this.fpush(1);this.vm_fplus();this.vm_fdiv();this.vm_fln();this.fpush(2);this.vm_fdiv()}};this.vm_fnegate=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].negate()};this.vm_flog=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].log()};this.vm_floor=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].floor()};this.vm_fceil=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].ceil()};this.vm_fabs=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].abs()};this.vm_fpi=function(){this.fpush(-1);var tos=this.f.length-1;this.f[tos]=this.f[tos].acos()};this.vm_fand=function(){var x=this.f.pop();var y=this.f.pop();this.f.push(x.and(y))};this.vm_f_or=function(){var x=this.f.pop();var y=this.f.pop();this.f.push(x.or(y))};this.vm_fxor=function(){var x=this.f.pop();var y=this.f.pop();this.f.push(x.xor(y))};this.vm_finvert=function(){var tos=this.f.length-1;this.f[tos]=this.f[tos].invert()};this.vm_f_to_s=function(){this.p.push(this.f.pop().floor().value().toNumber())};this.vm_rational=function(){var den=this.f.pop().value();var num=this.f.pop().value();this.fpushR(num,den)};this.vm_complex=function(){var im=this.f.pop().value();var re=this.f.pop().value();this.fpushC(re,im)};this.vm_fspl=function(){var spl=this.f.pop().split();this.fpush(spl[1]);this.fpush(spl[0])};this.dict={":":{kind:"primitive",defn:"colon"},";":{kind:"primitive",defn:"semis",immediate:true},code:{kind:"primitive",defn:"code"},"end-code":{kind:"primitive",defn:"end_code",immediate:true},constant:{kind:"primitive",defn:"constant"},variable:{kind:"primitive",defn:"variable"},fconstant:{kind:"primitive",defn:"fconstant"},allot:{kind:"primitive",defn:"allot"},dup:{kind:"primitive",defn:"vm_dup"},"+":{kind:"primitive",defn:"vm_plus"},"f+":{kind:"primitive",defn:"vm_fplus"},"f-":{kind:"primitive",defn:"vm_fminus"},"f*":{kind:"primitive",defn:"vm_fstar"},"f/":{kind:"primitive",defn:"vm_fdiv"},fmod:{kind:"primitive",defn:"vm_fmod"},"f/mod":{kind:"primitive",defn:"vm_fslashmod"},exit:{kind:"primitive",defn:"vm_exit"},"(literal)":{kind:"primitive",defn:"vm_literal",compile_only:true},"(fliteral)":{kind:"primitive",defn:"vm_fliteral",compile_only:true},1:{kind:"constant",defn:1},"1+":{kind:"colon",defn:"1 +"},"@":{kind:"primitive",defn:"vm_fetch"},"!":{kind:"primitive",defn:"vm_store"},fdup:{kind:"primitive",defn:"vm_fdup"},fdrop:{kind:"primitive",defn:"vm_fdrop"},fover:{kind:"primitive",defn:"vm_fover"},"f@":{kind:"primitive",defn:"vm_ffetch"},"f!":{kind:"primitive",defn:"vm_fstore"},fsqrt:{kind:"primitive",defn:"vm_fsqrt"},fexp:{kind:"primitive",defn:"vm_fexp"},fln:{kind:"primitive",defn:"vm_fln"},"f**":{kind:"primitive",defn:"vm_fpow"},"1/f":{kind:"primitive",defn:"vm_frecip"},froll:{kind:"primitive",defn:"vm_froll"},fswap:{kind:"colon",defn:"1 froll"},fsin:{kind:"primitive",defn:"vm_fsin"},fcos:{kind:"primitive",defn:"vm_fcos"},ftan:{kind:"primitive",defn:"vm_ftan"},fasin:{kind:"primitive",defn:"vm_fasin"},facos:{kind:"primitive",defn:"vm_facos"},fatan:{kind:"primitive",defn:"vm_fatan"},fsinh:{kind:"primitive",defn:"vm_fsinh"},fcosh:{kind:"primitive",defn:"vm_fcosh"},ftanh:{kind:"primitive",defn:"vm_ftanh"},fasinh:{kind:"primitive",defn:"vm_fasinh"},facosh:{kind:"primitive",defn:"vm_facosh"},fatanh:{kind:"primitive",defn:"vm_fatanh"},fswap:{kind:"colon",defn:"1 froll"},fnegate:{kind:"primitive",defn:"vm_fnegate"},flog:{kind:"primitive",defn:"vm_flog"},floor:{kind:"primitive",defn:"vm_floor"},fceil:{kind:"primitive",defn:"vm_fceil"},fabs:{kind:"primitive",defn:"vm_fabs"},fpi:{kind:"primitive",defn:"vm_fpi"},fand:{kind:"primitive",defn:"vm_fand"},"f-or":{kind:"primitive",defn:"vm_f_or"},fxor:{kind:"primitive",defn:"vm_fxor"},finvert:{kind:"primitive",defn:"vm_finvert"},"f>s":{kind:"primitive",defn:"vm_f_to_s"},rational:{kind:"primitive",defn:"vm_rational"},complex:{kind:"primitive",defn:"vm_complex"},fspl:{kind:"primitive",defn:"vm_fspl"}};this.comp={};this.xword=function(w){var entry=this.dict[w];if(entry!=null){switch(entry.kind){case"primitive":this[entry.defn]();break;case"colon":this.r.push([this.wp,this.ip]);this.wp=w;this.ip=-1;break;case"variable":this.p.push(entry.defn);break;case"constant":this.p.push(entry.defn);break;case"fconstant":this.f.push(new YNumber(entry.defn));break;case"code":for(var i=0;i<entry.defn.length;i++){global[entry.defn[i]](this)}break;default:throw new Error("YVM unknown kind");break}}else{throw new Error("? '"+w+"' at "+this.ip)}};this.compile=function(name){if(this.comp[name]!=null){return}var entry=this.dict[name];var a=typeof entry.defn=="string"?entry.defn.split(/\s/):entry.defn;var c=[];for(var i=0;i<a.length;i++){var entry=this.dict[a[i]];if(entry==null){var is_float=this.re_f.test(a[i]);if(is_float){c.push("(fliteral)");c.push(this.parse_float(a[i]))}else{c.push("(literal)");c.push(parseInt(a[i]))}}else if(entry.immediate!=null){throw new Error("immediate not supported yet")}else{c.push(a[i])}}if(c[c.length-1]!="exit"){c.push("exit")}this.comp[name]=c};this.init=function(name){this.wp=name;this.ip=0;this.busy=true};this.step=function(){if(this.ip==0){this.compile(this.wp)}this.xword(this.comp[this.wp][this.ip]);this.ip+=1};this.reset=function(){this.p.length=0;this.r.length=0;this.c.length=0;this.f.length=0;this.wp=undefined;this.ip=undefined;this.rp=undefined;this.busy=false};this.run=function(name,limit){this.init(name);var entry=this.dict[name];switch(entry.kind){case"colon":for(var i=0;i<limit;i++){this.step();if(!this.busy){break}}break;default:this.xword(name);this.busy=false;break}};this.parse_word=function(){var parsed=false;this.parse.w="";while(this.parse.b<this.parse.end&&this.parse.re_s.test(this.parse.s.charAt(this.parse.b))){this.parse.b++}for(;;){var c=this.parse.s.charAt(this.parse.b);if(this.parse.re_w.test(c)){this.parse.w+=c;this.parse.b++}else{break}}parsed=this.parse.w.length>0;return parsed};this.parse_unique_name=function(){if(!this.parse_word()){throw new Error("parse underflow")}var name=this.parse.w;if(this.dict[name]!=undefined){throw new Error("dup name '"+name+"'")}this.name=name};this._evaluate=function(s,limit){this.parse.s=s;this.parse.b=0;this.parse.end=s.length;this.body=[];var elimit=1e5;while(this.parse.b<this.parse.end){if(elimit--<1){throw new Error("oops")}if(!this.parse_word()){break}var entry=this.dict[this.parse.w];if(entry==undefined){var n=this.parse.w;var is_float=this.re_f.test(n);if(this.state==true){this.body.push(n)}else{if(is_float){this.f.push(new YNumber(n))}else{this.p.push(parseInt(n))}}}else{var compile=entry.immediate==undefined&&this.state==true;if(compile){this.body.push(this.parse.w)}else{this.run(this.parse.w,limit)}}}};this.evaluate=function(s,limit){var ok=false;if(arguments.length<2){limit=1e3}try{this._evaluate(s,limit);ok=true;this.e=undefined}catch(e){if(this.v){console.log("Throws "+e)}this.busy=false;this.state=false;this.e=e.message}return ok};this.lookup=function(name){var val=null;var entry=this.dict[name];if(entry!=undefined){switch(entry.kind){case"constant":val=entry.defn;break;case"fconstant":val=entry.defn;break;case"variable":val=this.m[entry.defn];break}}return val};this.parse_float=function(str){return new YNumber(str)};this.parse_int=function(str,base){var s=str.trim().toLowerCase();var i=s.length-1;var n=new YNumber(0);var b=new YNumber(1);var c;var d;var b0=new YNumber(base);while(i>=0){c=str.codePointAt(i);if(c>=48&&c<=57){c=c-48}else if(c>=97&&c<128){c=c-87}else{break}if(c>=base){break}d=new YNumber(c);d=d.multiply(b);n=n.add(d);b=b.multiply(b0);i--}return n}}if(typeof exports!=="undefined"){exports.YVM=YVM}var Model=function(calc){var self=this;calc.set_view_model(this);this.m=function(s){self.message(s)};this.k=function(idx,label,keymap){this.key[idx].label(label);this.key[idx].value=[keymap,idx]};this.d=function(idx,val){if(idx<0){idx=self.display().length+idx}switch(arguments.length){case 1:return self.display()[idx].value();break;case 2:self.display()[idx].value(val);self.display()[idx].editing("");break;case 3:self.display()[idx].value(val);self.display()[idx].editing("editing");break;default:throw new Error("oops");break}};this.a=function(idx,label){self.annunciator[idx].label(label)};this.live=false;this.display=ko.observableArray();this.display_height=function(n){var curlen=self.display().length;var changed=curlen!=n;if(changed){var tmp=[];var val;for(var i=0;i<n;i++){val=i<curlen?self.display[i]:"";tmp.push({value:ko.observable(val),editing:ko.observable("")})}self.display(tmp);changed=true}return changed};this.config_ok=function(){var ok=false;var n=self.config.nd.cur();if(n>=self.config.nd.min&&n<=self.config.nd.max){var changed=self.display_height(n);if(changed){calc.config.display[self.config.nd.orientation].height=n;self.save_config();calc.updateDisplay()}ok=true}if(ok){self.config_dismiss()}};this.config_dismiss=function(){self.config.v(false)};this.config={nd:{orientation:"unknown",cur:ko.observable(),min:1,max:4},v:ko.observable(false),ok:this.config_ok,cancel:this.config_dismiss};this.getOrientation=function(de){var width=de.clientWidth;var height=de.clientHeight;if(width==320&&height==460){return"portrait"}if(width==568&&height==320){return"landscape"}return height<calc.config.landscape_height?"landscape":"portrait"};this.orientation="unknown";this.edit_key=function(entry,desc){self.key_editor.current.entry=entry;self.key_editor.current.label(desc.label);self.key_editor.v(true);self.key_editor.current.v(true);self.key_editor.current.selected.desc_id=entry.value;self.key_editor.current.selected.label(desc.label);self.key_editor.current.selected.op(desc.op);self.key_editor.current.selected.arg(desc.arg);self.key_editor.current.selected.help(desc.help)};this.resize=function(){var orientation=self.getOrientation(document.documentElement);if(orientation!=self.orientation){var height=calc.config.display[orientation].height;self.orientation=orientation;self.config.nd.orientation=orientation;self.config.nd.cur(height);self.display_height(height);if(self.live){calc.unshift();calc.updateDisplay()}}};this.annunciator=[];for(var i=0;i<calc.config.num_annunciator;i++){this.annunciator.push({label:ko.observable()})}this.key=[];for(var i=0;i<calc.config.keypad["portrait"].default.length;i++){var desc=calc.config.desc[calc.config.keypad["portrait"].default[i]];this.key.push({label:ko.observable(desc.label),value:["default",i]})}this.op=function(entry,action){calc.operation(entry.value,action)};this.message=ko.observable();this.about_handler=function(){self.about.v(false)};this.about={t1:ko.observable("Config: "+calc.config.version),t2:ko.observable("  Calc: "+calc.version),t3:ko.observable("    VM: "+calc.vm.version),v:ko.observable(false),ok:this.about_handler};this.save_config=function(){self.cdata.data(calc.save_config())};this.cdata_show=function(){self.cdata.v(true)};this.cdata_dismiss=function(){self.cdata.v(false)};this.cdata={v:ko.observable(false),data:ko.observable(),ok:this.cdata_dismiss};this.reset_ok=function(){self.reset_dismiss();self.restore_defaults()};this.reset_dismiss=function(){self.reset.v(false)};this.reset={v:ko.observable(false),ok:this.reset_ok,cancel:this.reset_dismiss};this.factory_reset=function(){self.reset.v(true)};this.restore_defaults=function(){self.cdata.data("");calc.factory_reset()};this.add_key=function(ary,idx,label){ary.push({label:label,value:idx})};this.key_editor_ok=function(){if(self.key_editor.current.v()){if(self.key_editor.current.selected.desc_id>=0){var entry=self.key_editor.current.entry;var name=entry[0];var keyidx=entry[1];var desc_id=self.key_editor.current.selected.desc_id;var desc=calc.config.desc[desc_id];calc.config.keypad[self.orientation][name][keyidx]=desc_id;self.k(keyidx,desc.label,name)}}else{var desc_id=calc.config.desc.length;var op=self.key_editor.create.selection;var argtype=calc.ke.kind[op];var arg=self.key_editor.create[argtype].arg();var label=self.key_editor.create.label();var desc={label:label,op:op,arg:arg,help:self.key_editor.create.help()};calc.config.desc.push(desc);self.add_key(self.key_editor.current.desc,desc_id,label);if(op=="shift"){calc.config.keypad[self.orientation][arg]=[]}}self.save_config();self.key_editor_dismiss()};this.key_editor_dismiss=function(){if(self.key_editor.current.v()){self.key_editor.current.v(false);self.key_editor.v(false)}else{self.key_editor.create.v(false);self.key_editor.current.v(true)}};this.key_editor_create=function(){self.key_editor.current.v(false);self.key_editor.create.v(true)};this.select_key=function(entry,action){var desc=calc.config.desc[entry.value];self.key_editor.current.selected.desc_id=entry.value;self.key_editor.current.selected.label(desc.label);self.key_editor.current.selected.op(desc.op);self.key_editor.current.selected.arg(desc.arg);self.key_editor.current.selected.help(desc.help)};this.desc_editor_sel=function(){var sel=self.key_editor.create.selection;var itype=calc.ke.kind[sel];self.key_editor.create.input.v(itype=="input");self.key_editor.create.edit.v(itype=="edit");self.key_editor.create.dialog.v(itype=="dialog")};this.down_time=0;this.using_touch=false;this.down=function(event,action){self.down_time=Date.now();return true};this.up=function(event,action){if(!self.using_touch){self.go(event,action)}return true};this.t_start=function(event,action){self.using_touch=true;self.down_time=Date.now();return true};this.t_end=function(event,action){self.using_touch=true;self.go(event,action);return true};this.go=function(event,action){var delta=Date.now()-self.down_time;var entry=event.value;if(delta<1e3){self.op(event,action)}else if(delta<4e3){var desc=calc.config.desc[calc.config.keypad[self.orientation][entry[0]][entry[1]]];self.edit_key(entry,desc)}else if(event.value[1]==calc.config.keypad[self.orientation].default.length-1){self.factory_reset()}return false};var creators=[];for(var key in calc.ke.kind){creators.push(key)}var dialogs=[];for(var i=0;i<calc.ke.dialog.length;i++){dialogs.push(calc.ke.dialog[i])}var editors=[];for(var i=0;i<calc.ke.edit.length;i++){editors.push(calc.ke.edit[i])}var descs=[];for(var i=0;i<calc.config.desc.length;i++){if(calc.config.desc[i].op=="noop"&&i>0){continue}this.add_key(descs,i,calc.config.desc[i].label)}this.key_editor={v:ko.observable(false),ok:this.key_editor_ok,cancel:this.key_editor_dismiss,message:ko.observable(""),state:null,current:{v:ko.observable(false),label:ko.observable(""),desc:ko.observableArray(descs),entry:null,selected:{label:ko.observable(),op:ko.observable(),arg:ko.observable(),help:ko.observable(),desc_id:-1},create:this.key_editor_create},create:{v:ko.observable(false),creators:ko.observableArray(creators),selection:-1,label:ko.observable(),input:{v:ko.observable(true),arg:ko.observable()},dialog:{v:ko.observable(false),entries:ko.observableArray(dialogs),arg:ko.observable(-1)},edit:{v:ko.observable(false),keys:ko.observableArray(editors),arg:ko.observable(-1)},sel:this.desc_editor_sel,help:ko.observable()}};window.addEventListener("resize",this.resize,false);this.live=true};if(typeof exports!=="undefined"){exports.Model=Model}function YRX_m32_config(){this.name="Model-32";this.version="Model 32 v0.4.5";this.format=0;this.landscape_height=300;this.step_limit=100;this.num_annunciator=12;this.display={landscape:{height:1},portrait:{height:2}};this.desc=[{label:"",op:"noop",arg:"",help:""},{label:"<small>e<sup>x</sup></small>",op:"op",arg:"fexp",help:"exponential function"},{label:"ln",op:"op",arg:"fln",help:"natural logarithm"},{label:"<small>y<sup>x</sup></small>",op:"op",arg:"f**",help:"y to the power x"},{label:"<i>1/x</i>",op:"op",arg:"1/f",help:"reciprocal"},{label:"&#931;+",op:"noop",arg:"sigma+",help:"statistics add"},{label:"!",op:"op",arg:"f>s f!",help:"store in memory"},{label:"@",op:"op",arg:"f>s f@",help:"fetch from memory"},{label:"R&#x2193;",op:"op",arg:"4 froll",help:"roll down"},{label:"sin",op:"op",arg:"angle-to-radians fsin",help:"sine"},{label:"cos",op:"op",arg:"angle-to-radians fcos",help:"cosine"},{label:"tan",op:"op",arg:"angle-to-radians ftan",help:"tangent"},{label:"&#x21b2;",op:"edit",arg:"enter",help:"enter or dup number"},{label:"x&#x21c4;y",op:"op",arg:"fswap",help:"swap x and y"},{label:"&#177;",op:"edit",arg:"chs",help:"change sign of number"},{label:"?",op:"dialog",arg:"about",help:"about dialog"},{label:"&#926;",op:"dialog",arg:"config",help:"config dialog"},{label:"&#8592;",op:"edit",arg:"backspace",help:"erase digit or clear X"},{label:"a",op:"digit",arg:"a",help:"digit 'a'"},{label:"b",op:"digit",arg:"b",help:"digit 'b'"},{label:"7",op:"digit",arg:"7",help:"digit '7'"},{label:"8",op:"digit",arg:"8",help:"digit '8'"},{label:"9",op:"digit",arg:"9",help:"digit '9'"},{label:"/",op:"op",arg:"f/",help:"divide"},{label:"c",op:"digit",arg:"c",help:"digit 'c'"},{label:"d",op:"digit",arg:"d",help:"digit 'd'"},{label:"4",op:"digit",arg:"4",help:"digit '4'"},{label:"5",op:"digit",arg:"5",help:"digit '5'"},{label:"6",op:"digit",arg:"6",help:"digit '6'"},{label:"*",op:"op",arg:"f*",help:"multiply"},{label:"e",op:"digit",arg:"e",help:"digit 'e'"},{label:"f",op:"digit",arg:"f",help:"digit 'f'"},{label:"1",op:"digit",arg:"1",help:"digit '1'"},{label:"2",op:"digit",arg:"2",help:"digit '2'"},{label:"3",op:"digit",arg:"3",help:"digit '3'"},{label:"-",op:"op",arg:"f-",help:"subtract"},{label:"y/x",op:"op",arg:"rational",help:"x/y"},{label:"y+xi",op:"op",arg:"complex",help:"x+yi"},{label:"clr",op:"edit",arg:"fclear",help:"clear stacks"},{label:"0",op:"digit",arg:"0",help:"digit '0'"},{label:".",op:"digit",arg:".",help:"decimal point"},{label:"+",op:"op",arg:"f+",help:"add"},{label:"F",op:"shift",arg:"f",help:"shift F"},{label:"G",op:"shift",arg:"g",help:"shift G"},{label:"H",op:"shift",arg:"h",help:"shift H"},{label:"&#x221a;<i>x</i>",op:"op",arg:"fsqrt",help:"square root"},{label:"Sxy",op:"op",arg:"screenxy",help:"screen dimensions"},{label:"",op:"noop",arg:"",help:""},{label:"<small>x<sup>2</sup></small>",op:"op",arg:"fdup f*",help:"square X"},{label:"<small>10<sup>x</sup></small>",op:"op",arg:"10.0e0 f**",help:"X to the 10th power"},{label:"log",op:"op",arg:"flog",help:"common logarithm"},{label:"<small><i>x</i></small><sub>&#x221a;<i>y</i></sub>",op:"op",arg:"1/f f**",help:"Xth root of Y"},{label:"x!",op:"noop",arg:"factorial",help:"factorial"},{label:"&#931;-",op:"noop",arg:"sigma-",help:"statistics subtract"},{label:"&#8736;r",op:"op",arg:"radians",help:"angle mode radians"},{label:"rnd",op:"op",arg:"frand",help:"random number [0..1)"},{label:"&#8736;g",op:"op",arg:"grads",help:"angle mode grads"},{label:"<small>sin<sup>-1</sup></small>",op:"op",arg:"fasin radians-to-angle",help:"inverse sine"},{label:"<small>cos<sup>-1</sup></small>",op:"op",arg:"facos radians-to-angle",help:"inverse cosine"},{label:"<small>tan<sup>-1</sup></small>",op:"op",arg:"fatan radians-to-angle",help:"inverse tangent"},{label:"lastx",op:"op",arg:"lastx f@",help:"last X entered"},{label:"cdat",op:"dialog",arg:"cdata",help:"show config data"},{label:"&#8736;d",op:"op",arg:"degrees",help:"angle mode degree"},{label:"all",op:"op",arg:"display-all",help:"show full precision"},{label:"&#8709;a",op:"noop",arg:"clear_all",help:"clear all"},{label:"&#8709;X",op:"noop",arg:"clear_x",help:"clear X"},{label:"",op:"noop",arg:"",help:""},{label:"&#8709;p",op:"noop",arg:"clear_pgm",help:"clear program"},{label:"&#8709;S",op:"noop",arg:"clear_sigma",help:"clear statistics"},{label:"&#8709;V",op:"noop",arg:"clear_vars",help:"clear variables"},{label:"dec",op:"op",arg:"decimal",help:"base 10"},{label:"oct",op:"op",arg:"octal",help:"base 8"},{label:"bin",op:"op",arg:"binary",help:"base 2"},{label:"hex",op:"op",arg:"hex",help:"base 16"},{label:"&#8594;&#952;,r",op:"noop",arg:">polar",help:"rectangular to polar"},{label:"&#8594;hr",op:"op",arg:">hr",help:"to hours"},{label:"&#8594;&#176;",op:"op",arg:"2pi f/ 360.0e0 f*",help:"radians to degrees"},{label:"flr",op:"op",arg:"floor",help:"integer part"},{label:"fp",op:"op",arg:"ffrac",help:"fractional part"},{label:"|x|",op:"op",arg:"fabs",help:"absolute value"},{label:"&#8594;kg",op:"op",arg:"0.45359237e0 f*",help:"pounds to kilograms"},{label:"&#8594;&#176;C",op:"op",arg:"32.0e0 f- 5.0e0 f* 9.0e0 f/",help:"fahrenheit to celsius"},{label:"&#8594;cm",op:"op",arg:"2.54e0 f*",help:"inches to centimeters"},{label:"&#8594;l",op:"op",arg:"3.7854118.0e0 f*",help:"gallons to liters"},{label:"&#9829;",op:"edit",arg:"record",help:"start/stop macro recording"},{label:"&#9850;",op:"edit",arg:"macro",help:"play macro"},{label:"fix",op:"op",arg:"display-fix",help:"display fixed N after decimal"},{label:"eng",op:"op",arg:"display-eng",help:"display engineering N after decimal"},{label:"<small>a/b/c</small>",op:"noop",arg:"fdisp",help:"toggle fraction display"},{label:"Cn,r",op:"noop",arg:"Cn,r",help:"N combinations taken r at a time"},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"Pn,r",op:"noop",arg:"Pn,r",help:"N permutations taken r at a time"},{label:"SD",op:"op",arg:"seed",help:"random seed"},{label:"sci",op:"op",arg:"display-sci",help:"display scientific N digits after decimal"},{label:"&#931;n",op:"noop",arg:"sigma_n",help:"number of data points"},{label:"&#931;x",op:"noop",arg:"sigma_x",help:"Sum of x values"},{label:"&#931;y",op:"noop",arg:"sigma_y",help:"sum of y values"},{label:"<small>&#931;x<sup>2</sup></small>",op:"noop",arg:"sigma_x2",help:"sum of squared x values"},{label:"<small>&#931;y<sup>2</sup></small>",op:"noop",arg:"sigma_y2",help:"sum of squared y values"},{label:"R&#8593;",op:"op",arg:"-4 froll",help:"roll top 4 stack values down"},{label:"&#960;",op:"op",arg:"fpi",help:"value of PI"},{label:"%",op:"op",arg:"100.0e0 f/ fover f*",help:"X percent of Y"},{label:"%chg",op:"noop",arg:"percent_chg",help:"X changed percent of Y"},{label:"show",op:"noop",arg:"show",help:"show full value of X as message"},{label:"y&#x21c4;",op:"op",arg:"f>s dup f@ fswap f!",help:"swap Y with mem"},{label:"LRx",op:"noop",arg:"lr_x",help:"estimate x"},{label:"LRy",op:"noop",arg:"lr_y",help:"estimate y"},{label:"LRr",op:"noop",arg:"lr_r",help:"correlation"},{label:"LRm",op:"noop",arg:"lr_m",help:"slope"},{label:"LRb",op:"noop",arg:"lr_b",help:"y intercept"},{label:"_x",op:"noop",arg:"mean_x",help:"mean of X"},{label:"_y",op:"noop",arg:"mean_y",help:"mean of y"},{label:"_xw",op:"noop",arg:"mean_xw",help:"y weighted mean of x"},{label:"sx",op:"noop",arg:"sx",help:"sample standard deviation of x"},{label:"sy",op:"noop",arg:"sy",help:"sample standard deviation of y"},{label:"ox",op:"noop",arg:"ox",help:"population standard deviation of x"},{label:"oy",op:"noop",arg:"oy",help:"population standard deviation of y"},{label:"&#8594;y,x",op:"noop",
arg:">rectangular",help:"polar to rectanglular"},{label:"&#8594;hms",op:"op",arg:">hms",help:"to HH.MMSS"},{label:"&#8594;rad",op:"op",arg:"360.0e0 f/ 2pi f*",help:"degrees to radians"},{label:"&#931;xy",op:"noop",arg:"sigma_xy",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"&#8594;lb",op:"op",arg:"2.2046226e0 f/",help:"kilograms to pounds"},{label:"&#8594;&#176;F",op:"op",arg:"9.0e0 f* 5.0e0 f/ 32.0e0 f+",help:"celsius to fahrenheit"},{label:"&#8594;in",op:"op",arg:"2.54e0 f/",help:"centimeters to inches"},{label:"&#8594;gal",op:"op",arg:"3.7854118.0e0 f/",help:"liters to gallons"},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"view",op:"noop",arg:"view",help:"view variable as message"},{label:"/c",op:"noop",arg:"set_denominator",help:"set fractional denominator"},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"cosh",op:"op",arg:"fcosh",help:"hyperbolic cosine"},{label:"sinh",op:"op",arg:"fsinh",help:"hyperbolic sine"},{label:"tanh",op:"op",arg:"ftanh",help:"hyperbolic tangent"},{label:"<small>cosh<sup>-1</sup></small>",op:"op",arg:"facosh",help:"inverse hyperbolic cosine"},{label:"<small>sinh<sup>-1</sup></small>",op:"op",arg:"fasinh",help:"inverse hyperbolic sine"},{label:"<small>tanh<sup>-1</sup></small>",op:"op",arg:"fatanh",help:"inverse hyperbolic tangent"},{label:"mod",op:"op",arg:"fmod",help:"Y modulo X"},{label:"/mod",op:"op",arg:"f/mod",help:"Y%X Y/X"},{label:"over",op:"op",arg:"fover",help:"Y X Y"},{label:"spl",op:"op",arg:"fspl",help:"ip fp|re im|num den"},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"pgm",op:"noop",arg:"program",help:""},{label:"run",op:"noop",arg:"run",help:""},{label:"@+",op:"op",arg:"f>s f@ f+",help:"fetch and add"},{label:"@-",op:"op",arg:"f>s f@ f-",help:"fetch and subtract"},{label:"@*",op:"op",arg:"f>s f@ f*",help:"fetch and multiply"},{label:"@/",op:"op",arg:"f>s f@ f/",help:"fetch and divide"},{label:"+!",op:"op",arg:"f+!",help:"add to memory"},{label:"-!",op:"op",arg:"f-!",help:"subtract from memory"},{label:"*!",op:"op",arg:"f*!",help:"multiply memory"},{label:"/!",op:"op",arg:"f/!",help:"divide memory"},{label:"&",op:"op",arg:"fand",help:"bitwise and"},{label:"|",op:"op",arg:"f-or",help:"bitwise or"},{label:"^",op:"op",arg:"fxor",help:"bitwise xor"},{label:"~",op:"op",arg:"finvert",help:"bitwise complement"},{label:"ceil",op:"op",arg:"fceil",help:"integer ceiling"},{label:"iconj",op:"noop",arg:"complex_conjugate",help:"complex conjugate"},{label:"arg",op:"noop",arg:"complex_arg",help:"complex_arg"},{label:"asr",op:"noop",arg:"asr",help:"bitwise arithmetic shift right"},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""},{label:"",op:"noop",arg:"",help:""}];this.keypad={portrait:{default:[45,1,2,3,4,85,6,7,8,9,10,11,12,13,14,15,106,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,0,0,0],f:[48,49,50,51,79,0,97,55,104,57,58,59,60,109,105,176,77,78,70,71,72,73,171,167,62,54,56,84,170,166,0,0,0,0,169,165,63,98,86,87,168,164,42,43,44,0,0,0],g:[75,123,76,124,128,80,129,81,130,82,131,83,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,46,61,16,42,43,44,0,0,0],h:[144,145,146,147,148,149,150,151,152,153,0,0,172,173,174,175,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,42,43,44,0,0,0]},landscape:{default:[45,1,2,3,4,18,19,20,21,22,17,23,6,7,8,15,106,24,25,26,27,28,14,29,9,10,11,85,0,30,31,32,33,34,13,35,42,43,44,0,0,36,37,38,39,40,12,41],f:[48,49,50,51,79,0,97,55,0,105,171,167,0,109,104,176,77,78,70,71,72,73,170,166,57,58,59,84,0,0,62,54,56,60,169,165,42,43,44,0,0,0,63,98,86,87,168,164],g:[75,123,76,124,128,80,129,81,130,82,131,83,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,42,43,44,0,0,0,0,0,0,46,61,16],h:[144,145,146,147,148,149,150,151,152,153,0,0,172,173,174,175,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,42,43,44,0,0,0,0,0,0,0,0,0]}};this.init=["100 allot","variable base","variable lastx","variable display-num-mode","variable display-num-arg","variable angle-mode","variable angle-const-data 2 allot","variable rdseed","fpi 2.0e0 f* fconstant 2pi",": set-display-mode display-num-mode ! display-num-arg ! ;",": display-all 0 0 set-display-mode ;",": display-fix f>s 1 set-display-mode ;",": display-sci f>s 2 set-display-mode ;",": display-eng f>s 3 set-display-mode ;",": f+! f>s dup f@ f+ f! ;",": f-! f>s dup f@ fswap f- f! ;",": f/! f>s dup f@ fswap f/ f! ;",": f*! f>s dup f@ f* f! ;",": grads 2 angle-mode ! ;",": degrees 1 angle-mode ! ;",": radians 0 angle-mode ! ;",": angle-const angle-const-data angle-mode @ + f@ ;",": angle-to-radians angle-const f* ;",": radians-to-angle angle-const f/ ;",": decimal 10 base ! ;",": hex 16 base ! ;",": octal 8 base ! ;",": binary 2 base ! ;",": ffrac fdup floor f- ;",": fsplit fdup floor fswap fover f- ;",": seed ffrac 2147483647.0e0 f* rdseed f! ;",": frand rdseed f@ 1103515245.0e0 f* 12345.0e0 f+ 2147483648.0e0 fmod fdup rdseed f! 2147483647.0e0 f/ ;",": >hms fsplit 3600.0e0 f* 60.0e0 f/mod floor 1.0e2 f/ fswap 1.0e4 f/ f+ f+ ;",": >hr fsplit 1.0e2 f* fsplit 1.0e2 f* fswap 60.0e0 f* f+ 3600.0e0 f/ f+ ;","0.0e0 rdseed f!","1.0e0 angle-const-data f!","2pi 360.0e0 f/ angle-const-data 1 + f!","2pi 400.0e0 f/ angle-const-data 2 + f!","0.0e0 lastx f!","code screenxy screenXY end-code","decimal","degrees","display-all"]}function screenXY(yvm){yvm.fpush(document.documentElement.clientHeight);yvm.fpush(document.documentElement.clientWidth)}if(typeof exports!=="undefined"){exports.YRX_m32_config=YRX_m32_config}else{var global=this}var yrx_m32=new YRX({cf:YRX_m32_config,vm:new YVM});var yrx_view_model=new Model(yrx_m32.init());ko.applyBindings(yrx_view_model);yrx_view_model.resize();
//# sourceMappingURL=html/yrx.js.map
